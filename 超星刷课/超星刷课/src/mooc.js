!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=22)}([function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return p}));var o=n(5),r=n(1),i=n(2),c=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},a=function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},u="backend",s="frontend",l="content",p=function(){function t(e,n,o){t.app=this,t.runEnv=e,this.runEnvSwitch(e),this.launcher=n,this.component=o}return Object.defineProperty(t,"App",{get:function(){return t.app},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debug",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"prod",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.component.get("config")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"log",{get:function(){return this.component.get("logger")},enumerable:!0,configurable:!0}),t.prototype.run=function(){this.launcher.start()},Object.defineProperty(t.prototype,"IsFrontend",{get:function(){return t.IsFrontend},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsBackend",{get:function(){return t.IsBackend},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsContent",{get:function(){return t.IsContent},enumerable:!0,configurable:!0}),t.prototype.runEnvSwitch=function(e){switch(e){case s:t.IsFrontend=!0;break;case u:t.IsBackend=!0;break;case l:t.IsContent=!0}},Object.defineProperty(t.prototype,"Client",{get:function(){return t.IsFrontend?Object(o.a)("cxmooc-tools"):Object(o.c)("cxmooc-tools")},enumerable:!0,configurable:!0}),t.CheckUpdate=function(e){t.IsContent?chrome.storage.local.get(["version","enforce","hotversion","url"],(function(t){return c(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,e(i.a.version<t.version,t)];case 1:return n.sent(),[2]}}))}))})):r.a.HttpGet(i.a.url+"update?ver="+i.a.version,{json:!0,success:function(t){return c(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return n={version:t.version,url:t.url,enforce:t.enforce,hotversion:t.hotversion,injection:t.injection},chrome.storage.local.set(n),[4,e(i.a.version<n.version,n)];case 1:return o.sent(),[2]}}))}))},error:function(){return c(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,e(!1,void 0)];case 1:return t.sent(),[2]}}))}))}})},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"d",(function(){return a})),n.d(e,"l",(function(){return u})),n.d(e,"e",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"j",(function(){return p})),n.d(e,"n",(function(){return d})),n.d(e,"m",(function(){return h})),n.d(e,"o",(function(){return y})),n.d(e,"f",(function(){return _})),n.d(e,"k",(function(){return m})),n.d(e,"h",(function(){return v})),n.d(e,"i",(function(){return g})),n.d(e,"c",(function(){return b}));var o=n(0),r=n(2),i=function(){function t(){}return t.Request=function(e){o.a.App.IsBackend?fetch(e.url,e).then((function(t){return e.json?t.json():t.text()})).then((function(t){e.success&&e.success(t)})).catch((function(){e.error&&e.error()})):t.crossDomainRequest(e)},t.errorCode=function(t){if(!t.code)return!1;switch(t.code){case-1:o.a.App.log.Info(t.msg);break;case-2:o.a.App.log.Warn(t.msg);break;default:return!1}return!0},t.crossDomainRequest=function(e){if(window.hasOwnProperty("GM_xmlhttpRequest"))e.data=e.body,e.onreadystatechange=function(n){if(4==n.readyState)if(200==n.status)if(e.json){var o=JSON.parse(n.responseText);if(t.errorCode(o))return void(e.error&&e.error());e.success&&e.success(o)}else e.success&&e.success(n.responseText);else e.error&&e.error()},window.GM_xmlhttpRequest(e);else{var n=o.a.App.Client;n.Recv((function(n){if(0==n.code){if(e.json&&t.errorCode(n.body))return void(e.error&&e.error());e.success&&e.success(n.body)}else e.error&&e.error()})),n.Send({type:"GM_xmlhttpRequest",info:{url:e.url,method:e.method,json:e.json,body:e.body,headers:e.headers}})}},t.HttpGet=function(t,e){e.url=t,this.Request(e)},t.HttpPost=function(t,e,n){n.url=t,n.body=e,n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded",n.headers.Authorization=o.a.App.config.vtoken,n.headers["X-Version"]=r.a.version+"",n.method="POST",this.Request(n)},t.SendRequest=function(e,n){if(n.info){var r=n.info;if(o.a.App.IsBackend)r.success=function(t){e.Send({body:t,code:0})},r.error=function(){e.Send({code:-1})},t.Request(r);else{var i=o.a.App.Client;i.Send({type:"GM_xmlhttpRequest",info:r}),i.Recv((function(t){e.Send(t)}))}}},t}();function c(t,e){var n=t.createElement("script");return n.setAttribute("type","text/javascript"),n.src=e,n.className="injected-js",t.documentElement.appendChild(n),n}function a(t){for(var e=t.getElementsByClassName("injected-js"),n=0;n<e.length;n++)e[n].remove()}function u(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function s(t,e,n,o){void 0===e&&(e=""),void 0===n&&(n=""),void 0===o&&(o="");var r=document.createElement("button");return r.innerText=t,r.id=o,r.title=e,r.className=n,r}function l(t,e){var n=f();return n.open("GET",t,!0),n.onreadystatechange=function(){4==this.readyState&&(200==this.status?e&&e(this.responseText,this.resource):n.errorCallback&&n.errorCallback(this))},n.send(),n}function p(t,e,n,r){void 0===n&&(n=!0);var i=f();return i.open("POST",t,!0),i.setRequestHeader("Authorization",o.a.App.config.vtoken||""),n?i.setRequestHeader("Content-Type","application/json"):i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4==this.readyState&&(200==this.status?r&&r(this.responseText):i.errorCallback&&i.errorCallback(this))},i.send(e),i}function f(){var t;return(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).error=function(e){return t.errorCallback=e,t},t.withCredentials=!0,t}function d(t){return t=(t=t.replace(/<.*?>/g,"")).replace(/(^\s+)|(\s+$)/g,"")}function h(t){var e=/<img.*?src="(.*?)".*?>/g;t=t.replace(e,"$1"),e=/(<iframe.+?>)\s+?(<\/iframe>)/g,t=t.replace(e,"$1$2"),e=/<(iframe|a).*?(src|href)="(.*?)".*?>(.*?)<\/(iframe|a)>/g;return t=(t=(t=t.replace(e,"$3$4")).replace(/<.*?>/g,"")).replace(/(^\s+)|(\s+$)/g,""),(t=t.replace(/，/g,",").replace(/（/g,"(").replace(/）/g,")").replace(/？/g,"?").replace(/：/g,":").replace(/。/g,".").replace(/[“”]/g,'"')).replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&amp;/g,"&").trim()}function y(t,e,n){var o=t.indexOf(e)+e.length,r=t.indexOf(n,o);return t.substring(o,r)}function _(t){return t=t.substring(0,t.indexOf(".")+1)+t.substring(t.indexOf(".")+1).replace(".",""),Number(t)}function m(t,e,n){if(n=n||"yes",null==localStorage[e]||1!=localStorage[e]){var o=prompt(t+'\n如果以后不想再弹出本对话框并且同意请在下方填写"'+n+'"');if(null===o)return!1;if(n!=o)return!1;localStorage[e]=1}return!0}function v(t,e){var n=document.createElement("canvas");n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0,t.width,t.height);var o=n.toDataURL("image/"+e,.75);return n=null,o}function g(){return/Android|iPhone/i.test(navigator.userAgent)}function b(t){window.hasOwnProperty("GM_notification")?window.GM_notification(t):(o.a.App.Client.Send({type:"GM_notification",details:t}),o.a.App.Client.Send(t))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(){function t(){}return t.version=2.4,t.url="https://cx.icodef.com/",t.hotVersion="2.4.0",t.match=["*://*/mycourse/studentstudy?*","*://*/work/doHomeWorkNew?*","*://*/work/selectWorkQuestionYiPiYue?*","*://*/exam/test/reVersionTestStartNew?*","*://*/ztnodedetailcontroller/visitnodedetail?*","*://*/antispiderShowVerify.ac*","*://*/html/processVerify.ac?*","*://*/exam/test/reVersionPaperMarkContentNew?*","*://*/ananas/modules/*/index.html?*","*://*/exam/test?*","*://*/course/*.html?*","*://examh5.zhihuishu.com/stuExamWeb.html*","*://onlineexamh5new.zhihuishu.com/stuExamWeb.html*","*://studyh5.zhihuishu.com/videoStudy.html*","*://www.icourse163.org/learn/*","*://www.icourse163.org/spoc/learn/*"],t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"e",(function(){return d}));var o=n(1),r=n(2),i=n(0),c=function(){function t(){}return t.prototype.Equal=function(t,e){return t==e},t}(),a=new Map;a.set("ok","搜索成功").set("random","随机答案").set("no_support_random","不支持的随机答案类型").set("no_answer","题库中没有搜索到答案").set("no_match","题库中没有符合的答案");var u=new Map;function s(t){return a.get(t)||"未知错误"}function l(t){return u.get(t)||"未知错误"}function p(t){switch(t){case"单选题":return 1;case"多选题":return 2;case"判断题":return 3;case"填空题":return 4;default:return null}}u.set("success","搜索成功").set("network","题库网络错误").set("incomplete","题库不全").set("processing","搜索中...");var f=function(){function t(t,e){this.platform=t,this.info=e}return t.prototype.SetInfo=function(t){this.info=t},t.prototype.GetInfo=function(){return encodeURIComponent(JSON.stringify(this.info))},t.prototype.Answer=function(t,e){var n=this;i.a.App.log.Debug("答案查询",t);var c=new Array,a="success",u=function(i){for(var s="info="+n.GetInfo()+"&",l=i;l<i+10&&l<t.length;l++){var p=t[l];s+="topic["+(l-i)+"]="+encodeURIComponent(p.topic)+"&type["+(l-i)+"]="+p.type+"&"}o.a.HttpPost(r.a.url+"v2/answer?platform="+n.platform,s,{json:!0,success:function(o){for(var r="success",s=new Array,p=0;p<o.length;p++)if(null==o[p].result||o[p].result.length<=0)s.push({index:i+o[p].index,topic:o[p].topic,type:-1,status:"no_answer",answers:null,correct:null,Equal:n.Equal}),r="incomplete";else{var f=o[p].result[0];s.push({index:i+o[p].index,topic:f.topic,type:f.type,correct:f.correct,status:"ok",Equal:n.Equal})}if(c=c.concat(s),"success"!=r&&(a=r),e({status:"processing",answer:s}),!(l<t.length))return e({status:a,answer:c});u(l)},error:function(){return e({status:"network",answer:c})}})};u(0)},t.prototype.Push=function(t){var e=this;return new Promise((function(n){i.a.App.log.Debug("采集提交",t),o.a.HttpPost(r.a.url+"answer?platform="+e.platform,"info="+e.GetInfo()+"&data="+encodeURIComponent(JSON.stringify(t)),{json:!0,success:function(t){i.a.App.log.Info("答案自动记录成功,成功获得"+t.add_token_num+"个打码数,剩余数量:"+t.token_num),n("success")},error:function(){n("network")}})}))},t.prototype.Equal=function(t,e){return Object(o.m)(t)==Object(o.m)(e)},t.prototype.CheckCourse=function(t){var e=this;return new Promise((function(n){t=t||[e.info],o.a.HttpPost(r.a.url+"v2/check?platform="+e.platform,"info="+encodeURIComponent(JSON.stringify(t)),{success:function(){n(0)},error:function(){n(-1)}}),n()}))},t}(),d=function(){function t(t,e){this.bank="string"==typeof t?new f(t,e):t,this.question=new Array}return t.prototype.ClearQuestion=function(){this.question=new Array},t.prototype.AddQuestion=function(t){this.question.push(t)},t.prototype.Answer=function(t){var e=this,n=new Array;this.question.forEach((function(t){var e=t.GetType();-1!=e&&n.push({topic:t.GetTopic(),type:e})}));var o="success";this.bank.Answer(n,(function(n){if("processing"!=n.status)return i.a.App.log.Debug("题库返回",n),"success"!=n.status||"success"==o?t(n.status):t(o);for(var r=0;r<n.answer.length;r++){var c=n.answer[r],a=e.question[c.index],u=c.status;"no_answer"!=c.status?"no_match"!=(u=c.type!=a.GetType()?"no_match":a.Fill(c))?a.SetStatus(u):o=e.randAnswer(o,u,a):o=e.randAnswer(o,u,a)}}))},t.prototype.randAnswer=function(t,e,n){return i.a.App.config.rand_answer?e=n.Random():t="incomplete","no_support_random"==e&&(t="incomplete"),n.SetStatus(e),t},t.prototype.Push=function(t){var e=new Array;this.question.forEach((function(t){var n=t.Correct();null!=n&&null!=n.correct&&-1!=n.type&&(n.topic=n.topic,n.answers=n.answers,n.correct=n.correct,e.push(n))})),this.bank.Push(e).then((function(e){return i.a.App.log.Debug("题库返回",e),t(e)}))},t.prototype.dealOption=function(t){for(var e=0;e<t.length;e++)"string"==typeof t[e].content&&(t[e].content=t[e].content);return t},t.prototype.CheckCourse=function(){return this.bank.CheckCourse()},t}()},function(t,e,n){"use strict";function o(t){return t.style.outline="none",t.style.border="0",t.style.background="#7d9d35",t.style.color="#fff",t.style.borderRadius="4px",t.style.padding="2px 8px",t.style.cursor="pointer",t.style.fontSize="12px",t.style.marginLeft="4px",t.onmousemove=function(){t.style.boxShadow="1px 1px 1px 1px #ccc"},t.onmouseout=function(){t.style.boxShadow=""},t}function r(t,e,n,o){var r=document.createElement("p");return r.style.color="red",r.style.fontSize="14px",r.className="prompt-line-"+e,r.innerHTML=t,null!=n&&n.append(r),null!=o&&o.after(r),r}n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return f}));var o,r=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function i(t){return new c(t)}var c=function(){function t(t){this.port=t,this.recv()}return t.prototype.recv=function(){var t=this;chrome.runtime.onConnect.addListener((function(e){e.name==t.port&&e.onMessage.addListener((function(n){t.acceptCallback(new s(e),n)}))}))},t.prototype.Accept=function(t){this.acceptCallback=t},t}(),a=function(){function t(t){this.tag=t}return t.prototype.Recv=function(t){this.recvCallback=t},t}();function u(t){return new s(t)}var s=function(t){function e(e){var n=this;return"string"==typeof e?(n=t.call(this,e)||this).connect():n.conn=e,n.recv(),n}return r(e,t),e.prototype.connect=function(){this.conn=chrome.runtime.connect({name:this.tag})},e.prototype.recv=function(){var t=this;this.conn.onMessage.addListener((function(e){t.recvCallback(e)}))},e.prototype.Send=function(t){this.conn.postMessage(t)},e}(a);function l(t){return new p(t)}var p=function(){function t(t){this.tag=t,this.recv()}return t.prototype.recv=function(){var t=this;window.addEventListener("message",(function(e){e.data.tag==t.tag&&e.data.conn_tag&&"client"==e.data.source&&t.acceptCallback(new d(t.tag,e.data.conn_tag),e.data.msg)}))},t.prototype.Accept=function(t){this.acceptCallback=t},t}();function f(t){return new d(t)}var d=function(t){function e(e,n){var o=this;return void 0!==n?((o=t.call(this,e)||this).connTag=n,o.source="server"):((o=t.call(this,e)||this).connect(),o.source="client"),o}return r(e,t),e.prototype.connect=function(){var t=this;this.connTag=Math.random(),window.addEventListener("message",(function(e){e.data.tag==t.tag&&e.data.conn_tag==t.connTag&&"server"==e.data.source&&t.recvCallback&&t.recvCallback(e.data.msg)}))},e.prototype.Send=function(t){window.postMessage({tag:this.tag,conn_tag:this.connTag,msg:t,source:this.source},"*")},e}(a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u}));var o=n(1),r=n(0),i=function(){function t(t){this.getConfig=t}return t.prototype.GetConfig=function(t){return this.getConfig.GetConfig(t)},t.prototype.Watch=function(t,e){this.getConfig.Watch(t,e)},t.prototype.bool=function(t){return"boolean"==typeof t?t:"true"==t},Object.defineProperty(t.prototype,"super_mode",{get:function(){return this.bool(this.getConfig.GetConfig("super_mode"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vtoken",{get:function(){return this.getConfig.GetConfig("vtoken")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rand_answer",{get:function(){return this.bool(this.getConfig.GetConfig("rand_answer"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"auto",{get:function(){return this.bool(this.getConfig.GetConfig("auto"))},set:function(t){localStorage.auto=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"video_mute",{get:function(){return this.bool(this.getConfig.GetConfig("video_mute"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"answer_ignore",{get:function(){return this.bool(this.getConfig.GetConfig("answer_ignore"))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"video_cdn",{get:function(){return this.getConfig.GetConfig("video_cdn")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"video_multiple",{get:function(){return this.getConfig.GetConfig("video_multiple")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"interval",{get:function(){var t=100*(this.getConfig.GetConfig("interval")||.1);return Math.floor(Object(o.l)(t-t/2,t+t/2))/100},enumerable:!0,configurable:!0}),t}();function c(){return new a}var a=function(){function t(){}return t.prototype.GetConfig=function(t){return new Promise((function(e){return chrome.storage.sync.get(t,(function(n){n.hasOwnProperty(t)?e(n[t]):e(void 0)}))}))},t.prototype.Watch=function(t,e){throw new Error("Method not implemented.")},t.prototype.SetConfig=function(t,e){return new Promise((function(n){var o={};o[t]=e,chrome.storage.sync.set(o,(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(n){chrome.tabs.sendMessage(n[0].id,{type:"cxconfig",key:t,value:e})})),n()}))}))},t}();function u(){return new s}var s=function(){function t(){window.addEventListener("message",(function(t){t.data.type&&"cxconfig"==t.data.type&&(r.a.App.log.Info("配置更新:"+t.data.key+"="+t.data.value),localStorage[t.data.key]=t.data.value)}))}return t.prototype.GetConfig=function(t){return localStorage[t]},t.prototype.Watch=function(t,e){var n=this;"string"!=typeof t?t.forEach((function(t,o){n.setWatchMap(t,e)})):this.setWatchMap(t,e)},t.prototype.setWatchMap=function(t,e){},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(0),r=function(){function t(t,e){this.context=e||window,this.func=t}return t.prototype.Middleware=function(t){var e;e="string"==typeof this.func?this.func:this.func.name;var n=this.context[e];this.context[e]=function(){for(var e=[n],o=0;o<arguments.length;o++)e[o+1]=arguments[o];return t.apply(this,e)}},t.HookAjaxRespond=function(e,n){var r=this;if(!this.once){this.match_list=new Map;var i=this;new t("open",o.a.GlobalContext.XMLHttpRequest.prototype).Middleware((function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return i.match_list.forEach((function(t,o){-1!=n[1].indexOf(o)&&Object.defineProperty(e,"responseText",{configurable:!0,get:function(){return t.call(this,n[1],this.response)}})})),t.apply(this,n)})),this.once=!0}"string"==typeof e?this.match_list.set(e,n):e.forEach((function(t){r.match_list.set(t,n)}))},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a}));var o=n(4),r=n(1),i=n(0),c=function(){function t(t,e){this.taskinfo=e,this.context=t}return t.prototype.Complete=function(t){this.completeCallback=t},t.prototype.Init=function(){var t=this;return new Promise((function(e){t.loadCallback&&t.loadCallback(),e()}))},t.prototype.Load=function(t){this.loadCallback=t},t.prototype.Submit=function(){return new Promise((function(t){t()}))},t.prototype.Stop=function(){return new Promise((function(t){t()}))},t}(),a=function(){function t(t,e){this.task=e,this.prev=document.createElement("div"),t.style.textAlign="center",t.style.width="100%",t.prepend(this.prev),this.defaultBtn()}return t.prototype.defaultBtn=function(){var t=this,e=Object(o.b)(Object(r.e)(i.a.App.config.auto?"暂停挂机":"开始挂机","点击开始自动挂机","cx-btn"));e.onclick=function(){"暂停挂机"==e.innerText?(i.a.App.config.auto=!1,e.innerText="开始挂机",e.title="点击开始自动挂机",i.a.App.log.Info("挂机停止了")):(i.a.App.config.auto=!0,e.innerText="暂停挂机",e.title="停止挂机,开始好好学习",i.a.App.log.Info("挂机开始了"),t.task.Start())},this.prev.append(e)},t.prototype.append=function(t){this.prev.append(t)},t.prototype.download=function(){var t=this;if(this.task.taskinfo.property.objectid){var e=Object(o.b)(Object(r.e)("下载资源","我要下载下来好好学习","cx-btn"));return e.style.background="#999999",e.onclick=function(){window.open("http://d0.ananas.chaoxing.com/download/"+t.task.taskinfo.property.objectid)},e}},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return a}));var o=n(0),r=(n(10),n(1)),i=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],c=0,a=i.length;c<a;c++,r++)o[r]=i[c];return o},c=function(){function t(){}return t.prototype.getNowTime=function(){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},t.prototype.Debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.a.App.debug&&console.info.apply(console,i(["[debug",this.getNowTime(),"]"],t)),this},t.prototype.Info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.a.App.debug&&console.info.apply(console,i(["[info",this.getNowTime(),"]"],t)),this},t.prototype.Warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.warn.apply(console,i(["[warn",this.getNowTime(),"]"],t)),this},t.prototype.Error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.error.apply(console,i(["[error",this.getNowTime(),"]"],t)),this},t.prototype.Fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.error.apply(console,i(["[fatal",this.getNowTime(),"]"],t)),this},t}(),a=function(){function t(){var t=this;this.el=void 0,window.addEventListener("load",(function(){t.div=document.createElement("div"),t.div.innerHTML='\n            <div class="head"> \n               <span>小工具通知条</span> \n               <label class="switch" style="width:90px">\n                  <input class="checkbox-input" id="checkbox" type="checkbox" checked="checked">\n                  <label class="checkbox" for="checkbox"></label>\n                  <span>桌面通知</span>\n               </label>\n               <span class="close" style="float:right; cursor:pointer; margin-right:5px;">x</span>\n            </div>\n            <div class="main">\n               <div class="tools-notice-content"></div>\n            </div>\n            ',t.div.className="tools-logger-panel",document.body.appendChild(t.div),t.el=t.div.querySelector(".tools-notice-content"),t.div.querySelector(".close").onclick=function(){t.el=void 0,t.div.remove()};var e=t.div.querySelector("#checkbox");localStorage.is_notify=localStorage.is_notify||"true",e.checked="true"==localStorage.is_notify,e.checked||e.removeAttribute("checked"),e.addEventListener("change",(function(){localStorage.is_notify=this.checked})),setTimeout((function(){t.Info("233")}),1e3)}))}return t.prototype.getNowTime=function(){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},t.prototype.first=function(t,e,n){var o=document.createElement("div");o.innerHTML='\n                <div class="log" style="border-color: '+n+"; background-color: "+n+';">\n                    <p><span style="color:'+e+';">'+t+"</span></p>\n                </div>\n            ";var r=document.getElementsByClassName("tools-notice-content")[0].getElementsByTagName("div");document.querySelector(".tools-notice-content").insertBefore(o,r[0])},t.prototype.toStr=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",o=0;o<t.length;o++)"object"==typeof t[o]?n+=JSON.stringify(t[o])+"\n":n+=t[o]+"\n";return n.substring(0,n.length-1)},t.prototype.Debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return console.info.apply(console,i(["[debug",this.getNowTime(),"]"],t)),this},t.prototype.Info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.toStr.apply(this,t);return this.el?this.first(n,"#409EFF","rgba(121, 187, 255, 0.2)"):console.info.apply(console,i(["[info",this.getNowTime(),"]"],t)),this},t.prototype.Warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.toStr.apply(this,t);return this.el?this.first(n,"#5C3C00","rgba(250, 236, 216, 0.4)"):console.warn.apply(console,i(["[warn",this.getNowTime(),"]"],t)),document.hidden&&"true"==localStorage.is_notify&&Object(r.c)({title:"超星慕课小工具",text:n+"\n3秒后自动关闭",timeout:3e3}),this},t.prototype.Error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.toStr.apply(this,t);return this.el?this.first(n,"#ff7879","rgba(253, 226, 226, 0.5)"):console.error.apply(console,i(["[error",this.getNowTime(),"]"],t)),"true"==localStorage.is_notify&&Object(r.c)({title:"超星慕课小工具",text:n}),this},t.prototype.Fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.toStr.apply(this,t);return this.el?this.first(n,"#ff0000","rgba(253,162,169,0.5)"):console.error.apply(console,i(["[fatal",this.getNowTime(),"]"],t)),Object(r.c)({title:"超星慕课小工具",text:n}),this},t}();!function(){function t(){}t.prototype.Debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t.prototype.Info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t.prototype.Warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t.prototype.Error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this},t.prototype.Fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this}}()},function(t,e){window.addEventListener("load",(function(){var t=document.createElement("style");t.innerHTML='#cxtools {\n    position: absolute;\n    left: 250px;\n    top: 2px;\n    width: 200px;\n    font-size: 0;\n}\n\n.cx-btn {\n    outline: none;\n    border: 0;\n    background: #7d9d35;\n    color: #fff;\n    border-radius: 4px;\n    padding: 2px 8px;\n    cursor: pointer;\n    font-size: 12px;\n    margin-left: 4px;\n}\n\n.cx-btn:hover {\n    box-shadow: 1px 1px 1px 1px #ccc;\n}\n\n.zhs-tools-btn {\n    color: #fff;\n    background: #ff9d34;\n    padding: 4px;\n    display: inline-block;\n    height: 24px;\n    font-size: 14px;\n    line-height: 24px;\n    margin:0;\n}\n\n.zhs-tools-btn:hover {\n    background: #ff3838;\n}\n\n.zhs-start-btn{\n    background: #36ac36;\n}\n\n.zhs-start-btn:hover{\n    background: #3b8d3b;\n}\n\n#zhs-ytbn {\n    color: #fff;\n    background: #e777ff;\n}\n\n#zhs-ytbn:hover {\n    background: #e7b7f1;\n}\n\n.zhs-search-answer {\n    border: 0;\n    outline: none;\n    padding: 4px;\n}\n\n.zhs-search-answer:hover {\n    opacity: .85;\n}\n\n.mooc163-search{\n    background-color: #60b900;\n    display: block;\n    margin: 0 auto;\n}\n\n.tools-logger-panel{\n    width: 360px;\n    height: auto;\n    max-height: 260px;\n    color:#000;\n    position: fixed;\n    margin: 0 auto;\n    display: block;\n    font-size: 14px;\n    border-radius: 4px;\n    width: 340px;\n    text-align: center;\n    overflow: hidden;\n    left:60px;\n    z-index: 100000;\n    top: 40px;\n    background: rgba(256, 256, 256, 0.3);\n    box-shadow: 0px 0px 5px #bbb;\n    transition-property: opacity, background-color;\n    transition: 200ms ease-in-out;\n}\n\n.head {\n    width: 100%;\n    height: 25px;\n}\n\n.head span{\n    color:#000;\n    float:left;\n    font-weight: 550;\n}\n\n.status {\n    color: #67C23A;\n    font-weight: 600;\n}\n\n.tools-notice-content {\n    width: 100%;\n    height: 220px;\n    border-top:0px;\n    overflow-y: scroll;\n    overflow-x: hidden;\n}\n\n.tools-notice-content .log {\n    height: 26px;\n    width: auto;\n    text-align: center;\n    border: 1px solid #eee;\n}\n\n.tools-notice-content .log p {\n    margin: 0;\n    color: #aaa;\n    font-size: 11px;\n    font-weight: 500;\n    font-family: Arial, Helvetica, sans-serif;\n    line-height: 26px;\n}\n\n/* 滚动槽 */\n::-webkit-scrollbar {\n    width: 10px;\n    height: 10px;\n}\n\n::-webkit-scrollbar-track {\n    border-radius: 3px;\n    background: rgba(0, 0, 0, 0.06);\n    -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.08);\n}\n\n/* 滚动条滑块 */\n::-webkit-scrollbar-thumb {\n    border-radius: 3px;\n    background: rgba(0, 0, 0, 0.12);\n    -webkit-box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);\n}\n\n/* 复选框 */\n.switch {\n    margin: 2px auto;\n    display: inline-flex;\n    align-items: center;\n    width: auto;\n}\n.checkbox-input {\n    display: none\n}\n.checkbox {\n    -webkit-transition: background-color 0.3s;\n    transition: background-color 0.3s;\n    background-color: #fff;\n    border: 1px solid #d7d7d7;\n    border-radius: 50px;\n    width: 16px;\n    height: 16px;\n    vertical-align:middle;\n    margin: 0 5px;\n}\n.checkbox-input:checked+.checkbox {\n    background-color: #409EFF;\n}\n.checkbox-input:checked+.checkbox:after {\n    // content: "√";\n    display: inline-block;\n    height: 100%;\n    width: 100%;\n    color: #fff;\n    text-align: center;\n    line-height: 16px;\n    font-size: 12px;\n    box-shadow: 0 0 4px #409EFF;\n}\n\n.tools-logger-panel:hover,\n.tools-logger-panel:focus-within {\n    background: rgba(256, 256, 256, 0.7);\n}\n\n.tools-logger-panel:active {\n    background-color: #E5E5E5;\n}\n\n.tools-logger-panel > .close {\n    margin: 2px;\n}\n\n',document.body.appendChild(t)}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return p})),n.d(e,"c",(function(){return f}));var o,r=n(7),i=n(0),c=n(1),a=n(4),u=n(8),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(){function t(){}return t.prototype.Start=function(){var t=this;window.addEventListener("load",(function(){i.a.App.config.super_mode&&Object(c.i)()&&(i.a.GlobalContext.Ext.isChaoxing=!0)})),this.hook(),document.addEventListener("readystatechange",(function(){t.hook()})),this.Api()},t.prototype.hook=function(){if("interactive"==document.readyState){i.a.App.log.Debug("hook cx video");var t=new r.a("decode",i.a.GlobalContext.Ext),e=this;t.Middleware((function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var o=t.apply(this,e);return i.a.App.config.super_mode&&1==o.danmaku&&(o.danmaku=0),o})),window.frameElement.setAttribute("fastforward",""),window.frameElement.setAttribute("switchwindow",""),new r.a("params2VideoOpt",i.a.GlobalContext.ans.VideoJs.prototype).Middleware((function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];e.param=n[0];var r=t.apply(this,n);r.plugins.timelineObjects.url=e.param.rootPath+"/richvideo/initdatawithviewer";for(var c=i.a.App.config.video_cdn||localStorage.cdn||"公网1",a=0;a<r.playlines.length;a++)if(r.playlines[a].label==c){var u=r.playlines[a];r.playlines.splice(a,1),r.playlines.splice(0,0,u)}return localStorage.cdn=r.playlines[0].label,delete r.plugins.studyControl,r})),i.a.GlobalContext.Ext.isSogou=!1,new r.a("afterRender",i.a.GlobalContext.ans.videojs.ErrorDisplay.prototype).Middleware((function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var r=t.apply(this,n);return setTimeout((function(){for(var t=e.renderData.selectedIndex,n=e.renderData.playlines,o=i.a.App.config.video_cdn||localStorage.cdn||"公网1",r=0;r<n.length;r++)if(r!=t){if(""==o)return localStorage.cdn=n[r].label,e.onSelected(r);if(o==n[r].label)return localStorage.cdn=n[r].label,e.onSelected(r)}var c=(t+1)%n.length;return localStorage.cdn=n[c].label,e.onSelected(c)}),2e3),r}))}},t.prototype.Api=function(){var t=this;i.a.GlobalContext.sendTimePack=function(e,n){NaN!=e&&null!=e||(e=parseInt(t.param.duration));var o=Math.round(e||t.param.duration-Object(c.l)(1,2)),r="["+t.param.clazzId+"]["+t.param.userid+"]["+t.param.jobid+"]["+t.param.objectId+"]["+(1e3*o).toString()+"][d_yHJ!$pdA~5]["+(1e3*t.param.duration).toString()+"][0_"+t.param.duration+"]";r=i.a.GlobalContext.md5(r),Object(c.g)(t.param.reportUrl+"/"+t.param.dtoken+"?clipTime=0_"+t.param.duration+"&otherInfo="+t.param.otherInfo+"&userid="+t.param.userid+"&rt=0.9&jobid="+t.param.jobid+"&duration="+t.param.duration+"&dtype=Video&objectId="+t.param.objectId+"&clazzId="+t.param.clazzId+"&view=pc&playingTime="+o+"&isdrag=4&enc="+r,(function(t){var e=JSON.parse(t);n(e.isPassed)}))}},t}(),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.defaultBtn=function(){var e=this;t.prototype.defaultBtn.call(this);var n=Object(a.b)(Object(c.e)("秒过视频","秒过视频会被后台检测到","cx-btn")),o=Object(a.b)(Object(c.e)("下载字幕","我要下载字幕一同食用"));n.style.background="#F57C00",o.style.background="#638EE1",this.prev.append(n,this.download(),o),n.onclick=function(){Object(c.k)("秒过视频会产生不良记录,是否继续?","boom_no_prompt")&&e.task.sendEndTimePack((function(t){t?alert("秒过成功,刷新后查看效果"):alert("操作失败,错误")}))},o.onclick=function(){e.task.downloadSubtitle()}},e}(u.b),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.queryVideo=function(){return this.context.document.getElementById("video_html5_api")},e.prototype.Init=function(){var t=this;return new Promise((function(e){i.a.App.log.Debug("播放器配置",t.taskinfo);var n=t.context.setInterval((function(){try{var o=t.queryVideo();if(null==o)return void(t.context.document.querySelector("#reader").innerHTML.indexOf("您没有安装flashplayer")>=0&&(t.context.clearInterval(n),t.flash=!0,t.loadCallback&&t.loadCallback(),e()));t.context.clearInterval(n),t.video=o,t.initPlayer(),t.video.addEventListener("ended",(function(){t.end=!0,t.context.clearInterval(t.time),t.completeCallback&&t.completeCallback()})),t.loadCallback&&t.loadCallback(),e()}catch(t){}}),500)}))},e.prototype.Start=function(){var t=this;if(this.flash)return this.completeCallback&&this.completeCallback();this.time=this.context.setInterval((function(){i.a.App.config.auto&&t.video.paused&&t.video.play()}),5e3),this.video.addEventListener("pause",(function(){t.video.currentTime<=t.video.duration-5&&(t.end||t.video.play())})),this.video.play()},e.prototype.initPlayer=function(){this.playbackRate=this._playbackRate,this.muted=this._muted},e.prototype.sendEndTimePack=function(t){this.sendTimePack(this.video.duration,t)},e.prototype.sendTimePack=function(t,e){this.context.sendTimePack(t,(function(t){e(t)}))},e.prototype.downloadSubtitle=function(){Object(c.g)("/richvideo/subtitle?mid="+this.taskinfo.property.mid+"&_dc="+Date.parse((new Date).toString()),(function(t){var e=JSON.parse(t);if(e.length<=0)alert("没有字幕！");else for(var n=0;n<e.length;n++){var o=e[n].url;window.open(o)}}))},Object.defineProperty(e.prototype,"playbackRate",{set:function(t){this._playbackRate=t,this.video&&(this.video.playbackRate=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{set:function(t){this._muted=t,this.video&&(this.video.muted=t)},enumerable:!0,configurable:!0}),e}(u.a)},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var o=n(0),r=n(2),i=function(){function t(t,e){this.answer=e,this.context=t}return t.prototype.SetQueryQuestions=function(t){this.queryQuestions=t},t.prototype.addQuestion=function(){var t=this,e=this.queryQuestions.QueryQuestions();this.answer.ClearQuestion(),e.forEach((function(e){t.answer.AddQuestion(e)}))},t.prototype.QueryAnswer=function(){var t=this;return new Promise((function(e){if(t.lock)return e("processing");t.lock=!0,o.a.App.log.Info("题目搜索中..."),t.addQuestion(),t.answer.Answer((function(n){return t.lock=!1,e(n),"network"==n?o.a.App.log.Error("题库无法访问,请查看:"+r.a.url):"incomplete"==n?o.a.App.log.Warn("题库答案不全,请手动填写操作"):void 0}))}))},t.prototype.CollectAnswer=function(){var t=this;return new Promise((function(e){o.a.App.log.Debug("收集题目答案",t.context),t.addQuestion(),t.answer.Push((function(t){o.a.App.log.Debug("采集答案返回",t),e()}))}))},t}()},function(t,e,n){"use strict";n.d(e,"d",(function(){return p})),n.d(e,"b",(function(){return f})),n.d(e,"c",(function(){return d})),n.d(e,"a",(function(){return h}));var o,r=n(8),i=n(1),c=n(0),a=n(11),u=n(4),s=n(7),l=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.Start=function(){var t=this,e=function(){var n=t.context.document.querySelector(".imglook > .mkeRbtn");"hidden"!=n.style.visibility?(n.click(),t.time=t.context.setTimeout(e,1e3*Object(i.l)(1,5))):t.completeCallback&&t.completeCallback()};this.time=this.context.setTimeout(e,1e3*Object(i.l)(1,5))},e}(r.a),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.Start=function(){var t=this;window.addEventListener("load",(function(){c.a.App.config.super_mode&&Object(i.i)()&&(c.a.GlobalContext.Ext.isChaoxing=!0)})),this.hook(),document.addEventListener("readystatechange",(function(){t.hook()})),this.Api()},e.prototype.hook=function(){if("interactive"==document.readyState){c.a.App.log.Debug("hook cx audio");var t=this;new s.a("params2VideoOpt",c.a.GlobalContext.ans.AudioJs.prototype).Middleware((function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return t.param=n[0],e.apply(this,n)})),c.a.GlobalContext.Ext.isSogou=!1}},e}(a.b),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.queryVideo=function(){return this.context.document.getElementById("audio_html5_api")},e}(a.c),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e.prototype.defaultBtn=function(){var e=this;t.prototype.defaultBtn.call(this);var n=Object(u.b)(Object(i.e)("秒过嘤频","秒过会被后台检测到","cx-btn"));n.style.background="#F57C00",n.onclick=function(){Object(i.k)("秒过会产生不良记录,是否继续?","boom_audio_no_prompt")&&e.task.sendEndTimePack((function(t){t?alert("秒过成功,刷新后查看效果"):alert("操作失败,错误")}))},this.prev.append(n,this.download())},e}(r.b)},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=function(){function t(){this.event={}}return t.prototype.addEventListener=function(t,e){this.event[t]||(this.event[t]=new Array),this.event[t].push(e)},t.prototype.callEvent=function(t){this.event[t]&&this.event[t].forEach((function(t){t()}))},t.prototype.Init=function(){return new Promise((function(t){return t()}))},t.prototype.Done=function(){return!1},t.prototype.Submit=function(){return new Promise((function(t){return t()}))},t.prototype.Stop=function(){return new Promise((function(t){return t()}))},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var o,r=n(11),i=n(4),c=n(1),a=n(0),u=n(3),s=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(){function t(){}return t.CreateCourseQuestion=function(t,e){var n=Object(u.c)(Object(c.o)(e.innerText,"【","】"));return this.CreateCourseQuestionByTopicType(t,n,e)},t.CreateExamQuestion=function(t,e,n){var o=new f,r=null;switch(this.RemoveNotice(n),e){case 1:case 2:r=new m(t,n,e,o);break;case 3:r=new g(t,n,e,o);break;case 4:r=new v(t,n,e,o);break;default:return this.AddNotice(n,"不支持的类型"),null}return r},t.CreateCourseQuestionByTopicType=function(t,e,n){var o=null,r=new p;switch(this.RemoveNotice(n),e){case 1:case 2:o=new h(t,n,e,r);break;case 3:o=new y(t,n,e,r);break;case 4:o=new _(t,n,e,r);break;default:return this.AddNotice(n,"不支持的类型"),null}return o},t.getBeforeType=function(t){var e=t.previousElementSibling;do{if("Cy_TItle1"==e.className)return e;e=e.previousElementSibling}while(null!=e);return null},t.CreateHomeWorkQuestion=function(e,n){var o=t.getBeforeType(n);return this.CreateCourseQuestionByTopicType(e,Object(u.c)(Object(c.o)(o.innerText,".","（")),n)},t.CreateExamCollectQuestion=function(e,n){var o=t.getBeforeType(n.parentElement).innerText.match(/、(.*?)[\s|（]/)[1];return this.CreateExamQuestionByTopicType(e,Object(u.c)(o),n)},t.CreateExamQuestionByTopicType=function(t,e,n){var o=null,r=new p;switch(this.RemoveNotice(n),e){case 1:case 2:o=new h(t,n,e,r);break;case 3:o=new y(t,n,e,r);break;case 4:o=new v(t,n,e,r);break;default:return this.AddNotice(n,"不支持的类型"),null}return o},t.RemoveNotice=function(t){var e=t.querySelector(".clearfix > ul,.clearfix > .Py_tk,.Zy_ulTk");null==e&&(e=t),e.querySelectorAll(".prompt-line-answer").forEach((function(t){t.remove()}))},t.AddNotice=function(t,e){var n=t.querySelector(".clearfix > ul,.clearfix > .Py_tk,.Zy_ulTk");null==n&&(n=t),Object(i.a)(e,"answer",n)},t}(),p=function(){function t(){}return t.prototype.GetTopic=function(t){var e=t.querySelector(".Zy_TItle > .clearfix,.Cy_TItle > .clearfix").innerHTML;return e=e.substring(e.indexOf("】")+1),/（(.+?)分）($|\s)/.test(e)&&(e=e.substring(0,e.lastIndexOf("（"))),e},t}(),f=function(){function t(){}return t.prototype.GetTopic=function(t){var e=t.querySelector(".Cy_TItle.clearfix .clearfix").innerHTML;return e=(e=e.substr(0,e.lastIndexOf("分）"))).substr(0,e.lastIndexOf("（"))},t}(),d=function(){function t(t,e,n,o){this.context=t,this.el=e,this.type=n,this.processor=o}return t.prototype.SetStatus=function(t){this.AddNotice(Object(u.f)(t))},t.prototype.GetTopic=function(){return this.processor.GetTopic(this.el)},t.prototype.RemoveNotice=function(){l.RemoveNotice(this.el)},t.prototype.AddNotice=function(t){l.AddNotice(this.el,t)},t.prototype.GetType=function(){return this.type},t.prototype.options=function(){return this.el.querySelector(".clearfix > ul,.clearfix ul.Zy_ulBottom.clearfix,ul.Zy_ulTk").querySelectorAll("li")},t.prototype.isCorrect=function(){var t=this.el.querySelector(".Py_answer.clearfix,.Py_tk");return t.innerHTML.indexOf("正确答案")<0&&t.querySelectorAll(".fr.dui").length<=0&&t.querySelectorAll(".fr.bandui").length<=0?null:t},t.prototype.defaultAnswer=function(){var t=new u.a;return t.topic=this.GetTopic(),t.type=this.GetType(),t.correct=new Array,t.answers=new Array,t},t}(),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getContent=function(t){return(t=t.querySelector("a")).innerHTML},e.prototype.getOption=function(t){return t.querySelector("input").value},e.prototype.click=function(t,e){var n=t.querySelector("label > input");n.checked||n.click(),this.AddNotice(this.getOption(t)+":"+e)},e.prototype.Random=function(){var t=this.options(),e=Object(c.l)(0,t.length-1);return this.click(t[e],this.getContent(t[e])),"random"},e.prototype.Fill=function(t){for(var e=this.options(),n=!1,o=0;o<t.correct.length;o++)for(var r=0;r<e.length;r++)""==t.correct[o].content.trim()?this.getOption(e[r])==t.correct[o].option&&(this.click(e[r],this.getContent(e[r])),n=!0):t.Equal(this.getContent(e[r]),t.correct[o].content)&&(this.click(e[r],t.correct[o].content),n=!0);return n?"ok":"no_match"},e.prototype.Correct=function(){var t=this.isCorrect();if(null==t)return null;for(var e=this.defaultAnswer(),n=this.el.querySelectorAll(".Zy_ulTop > li.clearfix,.Cy_ulTop li"),o=t.querySelector("span").innerText,r=0;r<n.length;r++){var i={option:n[r].querySelector("i.fl").innerText.substring(0,1),content:n[r].querySelector("a.fl,a").innerHTML};e.answers.push(i),o.indexOf(i.option)>0&&e.correct.push(i)}return e},e}(d),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getContent=function(t){return"true"==t.querySelector("label > input,input").value?"对√":"错×"},e.prototype.click=function(t){var e=t.querySelector("label > input,input");e.checked||e.click(),this.AddNotice(this.getContent(t))},e.prototype.Random=function(){var t=this.options(),e=Object(c.l)(0,1);return this.click(t[e]),"random"},e.prototype.Fill=function(t){var e=this.options();return this.click(e[t.correct[0].content?0:1]),"ok"},e.prototype.Correct=function(){var t=this.el.querySelector(".Py_answer.clearfix");if(t.innerHTML.indexOf("正确答案")<0&&t.querySelectorAll(".fr.dui").length<=0&&t.querySelectorAll(".fr.cuo").length<=0)return null;var e=this.defaultAnswer();return t.querySelector("span").innerText.indexOf("×")>=0?e.correct.push({option:!1,content:!1}):e.correct.push({option:!0,content:!0}),e},e}(h),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getOption=function(t){if("XztiHover1"==t.className)return Object(c.o)(t.previousElementSibling.innerHTML,"第","空");var e=t.querySelector("span.fb");return Object(c.o)(e.innerHTML,"第","空")},e.prototype.Random=function(){return"no_support_random"},e.prototype.Correct=function(){if(null==this.isCorrect())return null;var t=this.defaultAnswer(),e=this.el.querySelectorAll(".Py_tk span.font14"),n=!1;e.length<=0&&(n=!0,e=this.el.querySelectorAll(".Py_answer.clearfix .font14"));for(var o=0;o<e.length;o++)if(!(n&&e[o].querySelectorAll(".fr.dui").length<=0)){var r=e[o].querySelector("i.fl"),i={option:Object(c.o)(r.innerHTML,"第","空"),content:e[o].querySelector(".clearfix").innerText};t.correct.push(i)}return t},e.prototype.Fill=function(t){var e=this.options();e.length||(e=this.el.querySelectorAll(".XztiHover1"));for(var n=0,o=0;o<t.correct.length;o++)for(var r=0;r<e.length;r++)if(this.getOption(e[r])==t.correct[o].option){n++;var i=e[r].querySelector("input.inp");if(i)i.value=Object(c.n)(t.correct[o].content),this.AddNotice(this.getOption(e[r])+":"+t.correct[o].content);else{var a=this.context.$(e[r]).find("textarea");if(a.length<=0){this.AddNotice(this.getOption(e[r])+"空发生了一个错误");continue}this.context.UE.getEditor(a.attr("name")).setContent(t.correct[o].content),this.AddNotice(this.getOption(e[r])+":"+t.correct[o].content)}}return n==e.length?"ok":"no_match"},e}(d),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.options=function(){return this.el.querySelectorAll(".Cy_ulBottom.clearfix.w-buttom li input")},e.prototype.getContent=function(t){var e=this.el.querySelectorAll(".Cy_ulTop.w-top li div.clearfix a"),n=t.parentElement.parentElement,o=-1;do{n=n.previousElementSibling,o++}while(null!=n);return e[o].innerHTML},e.prototype.getOption=function(t){return t.parentElement.innerText},e.prototype.click=function(t,e){t.click(),this.AddNotice(this.getOption(t)+":"+e)},e}(h),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.options=function(){return this.el.querySelectorAll(".Cy_ulTk .XztiHover1")},e.prototype.getOption=function(t){var e=t.querySelector(".fb.font14");return Object(c.o)(e.innerHTML,"第","空")},e.prototype.Fill=function(t){for(var e=this.options(),n=0,o=0;o<t.correct.length;o++)for(var r=0;r<e.length;r++)if(this.getOption(e[r])==t.correct[o].option){n++;var i=window.$(e[r]).find("textarea");if(i.length<=0){this.AddNotice(this.getOption(e[r])+"空发生了一个错误");continue}window.UE.getEditor(i.attr("name")).setContent(t.correct[o].content),this.AddNotice(this.getOption(e[r])+":"+t.correct[o].content)}return n==e.length?"ok":"no_match"},e.prototype.Correct=function(){if(null==this.isCorrect())return null;var t=this.defaultAnswer(),e=this.el.querySelectorAll(".Py_tk div[id] span.font14"),n=!1;e.length<=0&&(n=!0,e=this.el.querySelectorAll(".Py_answer.clearfix .font14"));for(var o=0;o<e.length;o++)if(!(n&&e[o].querySelectorAll(".fr.dui").length<=0)){var r=e[o].querySelector("i"),i={option:Object(c.o)(r.innerHTML,"第","空"),content:e[o].innerHTML.substr(e[o].innerHTML.indexOf("</i>")+4)};t.correct.push(i)}return t},e}(_),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.options=function(){return this.el.querySelectorAll(".Cy_ulBottom.clearfix li")},e}(y),b=n(12),w=n(8),x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),k=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},A=function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e.prototype.defaultBtn=function(){var e=this;t.prototype.defaultBtn.call(this);var n=Object(i.b)(Object(c.e)("搜索题目","点击搜索题目答案","cx-btn"));n.style.background="#3fae93",this.prev.append(n),n.onclick=function(){return k(e,void 0,void 0,(function(){return A(this,(function(t){return n.innerText="答案搜索中...",this.task.Start().then((function(t){t=t||"搜索题目",n.innerText=Object(u.b)(t)})),[2]}))}))}},e}(w.b),C=function(t){function e(e,n,o){var r=t.call(this,e,n)||this;return r.topic=o,r}return x(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){a.a.App.log.Debug("题目信息",t.taskinfo),t.topic.Init(),t.loadCallback&&t.loadCallback(),e()}))},e.prototype.Start=function(){var t=this;return new Promise((function(e){return k(t,void 0,void 0,(function(){var t;return A(this,(function(n){switch(n.label){case 0:return this.lock?[2,e("processing")]:(this.lock=!0,[4,this.topic.QueryAnswer()]);case 1:return t=n.sent(),this.status=t,this.completeCallback&&this.completeCallback(),this.lock=!1,[2,e(t)]}}))}))}))},e.prototype.Submit=function(){return k(this,void 0,void 0,(function(){var t=this;return A(this,(function(e){return[2,new Promise((function(e){"success"==t.status?t.topic.Submit().then((function(){e()})):e()}))]}))}))},e}(w.a),E=function(){function t(t,e){this.context=t,this.createQuestion=e}return t.prototype.QueryQuestions=function(){var t=this,e=this.context.document.querySelectorAll(".TiMu"),n=new Array;return e.forEach((function(e){var o=t.createQuestion(t.context,e);null!=o&&n.push(o)})),n},t}(),S=function(t){function e(e,n){var o=t.call(this,e,n)||this;return n.CheckCourse(),o}return x(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){var n=t.context.setInterval((function(){return k(t,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return"complete"!=this.context.document.readyState?[3,3]:(this.context.clearInterval(n),this.context.document.URL.indexOf("selectWorkQuestionYiPiYue")>0?[4,this.CollectAnswer()]:[3,2]);case 1:t.sent(),t.label=2;case 2:e(),t.label=3;case 3:return[2]}}))}))}),500)}))},e.prototype.QueryAnswer=function(){return this.context.document.URL.indexOf("selectWorkQuestionYiPiYue")>0?null:t.prototype.QueryAnswer.call(this)},e.prototype.Submit=function(){var t=this;return new Promise((function(e){a.a.App.log.Info("准备提交答案");var n=t;t.context.setTimeout((function(){t.context.document.querySelector(".Btn_blue_1").click(),t.context.setTimeout((function(){var o=t.context.document.querySelector("#tipContent").innerHTML;if(o.indexOf("未做完")>0)return alert("提示:"+o),e("未做完"),void a.a.App.log.Fatal("有题目未完成,请手动操作.提示:"+o);var r=t.context.setInterval((function(){"none"==(o=document.getElementById("validate")).style.display&&(t.context.clearInterval(r),t.context.parent.document.querySelector("#frame_content").addEventListener("load",(function(){return k(this,void 0,void 0,(function(){return A(this,(function(t){switch(t.label){case 0:return this.contentWindow.document.URL.indexOf("selectWorkQuestionYiPiYue")>0?[4,n.CollectAnswer()]:[3,2];case 1:t.sent(),e(),t.label=2;case 2:return[2]}}))}))})),t.context.document.querySelector(".bluebtn").click())}),2e3)}),2e3)}),2e3)}))},e}(b.a),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return x(e,t),e.prototype.QueryQuestions=function(){var t=document.querySelector(".current"),e=Object(u.c)(t.parentElement.previousElementSibling.innerText),n=l.CreateExamQuestion(window,e,document.querySelector(".leftContent.TiMu")),o=new Array;return null==n||o.push(n),o},e.prototype.Init=function(){return document.URL.indexOf("exam/test/reVersionPaperMarkContentNew")>0&&this.CollectAnswer(),null},e.prototype.Submit=function(){return new Promise((function(t){t()}))},e}(b.a),P=function(t){function e(e,n){return t.call(this,e,n)||this}return x(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){document.querySelector("input#workRelationId")||t.CollectAnswer(),e()}))},e.prototype.Submit=function(){return new Promise((function(t){t()}))},e}(S),q=n(13),j=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},M=function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},I=function(){function t(){}return t.CreateCourseTask=function(t,e){if("insertaudio"==e.property.module&&(e.type="audio"),"video"!=e.type&&"workid"!=e.type&&"document"!=e.type&&"audio"!=e.type)return null;var n,o,i=t.document.querySelector("iframe[jobid='"+e.jobid+"']");switch(null==i?(i=t.document.querySelector("iframe[data*='"+e.property.mid+"'],iframe[objectid='"+e.property.objectid+"']"),o=document.createElement("div"),i.parentElement.prepend(o)):o=i.previousElementSibling,e.type){case"video":(n=(p=new r.a(o,new r.c(i.contentWindow,e))).task).muted=a.a.App.config.video_mute,n.playbackRate=a.a.App.config.video_multiple;break;case"workid":var c=i.contentWindow.document.querySelector("#frame_content").contentWindow;e.refer=t.document.URL,e.id=e.property.workid,e.info=e.property.workid;var s=new S(c,new u.e("cx",{refer:t.document.URL,id:e.property.workid,info:e.property.workid}));s.SetQueryQuestions(new E(c,(function(t,e){return l.CreateCourseQuestion(t,e)})));var p=new O(o,new C(t,e,s));if(a.a.App.config.answer_ignore)return null;n=p.task;break;case"document":(p=new w.b(o,new q.d(i.contentWindow,e))).append(p.download()),(n=p.task).muted=a.a.App.config.video_mute,n.playbackRate=a.a.App.config.video_multiple;break;case"audio":(n=(p=new q.a(o,new q.c(i.contentWindow,e))).task).muted=a.a.App.config.video_mute,n.playbackRate=a.a.App.config.video_multiple;break;default:return null}return n},t.CreateExamTopicTask=function(t,e){var n=new T(t,new u.e("cx",e)),o=new C(t,e,n);if(document.URL.indexOf("exam/test/reVersionTestStartNew")>0){n.SetQueryQuestions(n);var r=Object(i.b)(Object(c.e)("搜索答案","搜索题目答案"));document.querySelector(".Cy_ulBottom.clearfix.w-buttom,.Cy_ulTk,.Cy_ulBottom.clearfix").append(r),r.onclick=function(){r.innerText="答案搜索中...";try{o.Start().then((function(t){t=t||"搜索题目",r.innerText=Object(u.b)(t)}))}catch(t){}return!1}}else n.SetQueryQuestions(new E(t,(function(t,e){return l.CreateExamCollectQuestion(t,e)})));return o},t.CreateHomeworkTopicTask=function(t,e){var n=this,o=new u.e("cx",e);""!=e.info&&o.CheckCourse();var r=new P(t,o);r.SetQueryQuestions(new E(t,(function(t,e){return l.CreateHomeWorkQuestion(t,e)})));var a=new C(t,e,r),s=Object(i.b)(Object(c.e)("搜索答案","搜索题目答案"));return document.querySelector("input#workRelationId")&&(document.querySelector(".CyTop").append(s),s.onclick=function(){return j(n,void 0,void 0,(function(){return M(this,(function(t){return s.innerText="答案搜索中...",a.Start().then((function(t){t=t||"搜索题目",s.innerText=Object(u.b)(t)})),[2]}))}))}),a},t}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CxCourse})),__webpack_require__.d(__webpack_exports__,"b",(function(){return CxExamTopic})),__webpack_require__.d(__webpack_exports__,"c",(function(){return CxHomeWork}));var _App_internal_application__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_App_internal_utils_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_App_mooc_chaoxing_factory__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15),__awaiter=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},__generator=function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},CxCourse=function(){function CxCourse(){}return CxCourse.prototype.Start=function(){var t=this;document.addEventListener("load",(function(e){var n=e.srcElement||e.target;"iframe"==n.id&&(_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.log.Info("超星新窗口加载"),clearTimeout(t.timer),t.OperateCard(n))}),!0)},CxCourse.prototype.OperateCard=function(iframe){return __awaiter(this,void 0,void 0,(function(){var iframeWindow,match,margStr,_loop_1,this_1,index,_this=this;return __generator(this,(function(_a){switch(_a.label){case 0:if(iframeWindow=iframe.contentWindow,null==iframeWindow.mArg){if(match=iframeWindow.document.body.innerHTML.match(/try{\s+?mArg = (.*?);/),!match)return[2];margStr="mArg="+match[1],iframeWindow.mArg=eval(margStr)}this.attachments=iframeWindow.mArg.attachments,this.taskList=new Array,_loop_1=function(t){var e,n,o;return __generator(this,(function(r){switch(r.label){case 0:return(e=this_1.attachments[t]).defaults=iframeWindow.mArg.defaults,null==e.jobid?(_App_mooc_chaoxing_factory__WEBPACK_IMPORTED_MODULE_2__.a.CreateCourseTask(iframeWindow,e),[2,"continue"]):(n=_App_mooc_chaoxing_factory__WEBPACK_IMPORTED_MODULE_2__.a.CreateCourseTask(iframeWindow,e))?(n.jobIndex=t,this_1.taskList.push(n),o=this_1.taskList.length-1,n.Load((function(){})),n.Complete((function(){return __awaiter(_this,void 0,void 0,(function(){return __generator(this,(function(t){return this.startTask(o+1,n),[2]}))}))})),[4,n.Init()]):[2,"continue"];case 1:return r.sent(),[2]}}))},this_1=this,index=0,_a.label=1;case 1:return index<this.attachments.length?[5,_loop_1(index)]:[3,4];case 2:_a.sent(),_a.label=3;case 3:return index++,[3,1];case 4:return _App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.log.Debug("任务点参数",this.attachments),this.startTask(0,null),[2]}}))}))},CxCourse.prototype.startTask=function(t,e){return __awaiter(this,void 0,void 0,(function(){var n,o,r=this;return __generator(this,(function(i){if(_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.config.auto){for(o=t;o<this.taskList.length;o++)if(n=this.taskList[o],this.attachments[n.jobIndex].job)return 0==t?n.Start():this.delay((function(){return __awaiter(r,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return e?[4,e.Submit()]:[3,2];case 1:t.sent(),t.label=2;case 2:return n.Start(),[2]}}))}))})),[2];this.nextPage(null,e)}return[2]}))}))},CxCourse.prototype.delay=function(t){var e=_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.config.interval;_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.log.Info(e+"分钟后自动切换下一个任务点"),this.timer=setTimeout((function(){_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.config.auto&&t()}),6e4*e)},CxCourse.prototype.afterPage=function(){for(var t=document.querySelectorAll("div.ncells > *:not(.currents) > .orange01"),e=document.querySelector("div.ncells > .currents"),n=0;n<t.length;n++)if(e.getBoundingClientRect().top<t[n].getBoundingClientRect().top)return t[n];return null},CxCourse.prototype.nextPage=function(t,e){var n=this;if(null==t)return this.delay((function(){return __awaiter(n,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return e?[4,e.Submit()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.nextPage(0,null),[2]}}))}))}));var o=document.querySelector("span.currents ~ span");return null!=o?o.click():null==(o=this.afterPage())?null==document.querySelector("div.ncells > *:not(.currents) > .lock")?(_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.log.Warn("任务结束了"),alert("任务结束了")):setTimeout((function(){if(t>5)return _App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.log.Fatal("被锁卡住了,请手动处理");_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.log.Info("等待解锁"),n.nextPage(t+1,null)}),5e3):void o.parentElement.querySelector("a>span").click()},CxCourse}(),CxExamTopic=function(){function t(){}return t.prototype.Start=function(){window.addEventListener("load",(function(){var t=document.querySelector("#paperId"),e="0";t&&(e=t.value);var n=_App_mooc_chaoxing_factory__WEBPACK_IMPORTED_MODULE_2__.a.CreateExamTopicTask(window,{refer:document.URL,id:"exam-"+e,info:e});n.Init(),document.URL.indexOf("exam/test/reVersionTestStartNew")>0&&_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.config.auto&&n.Start()}))},t}(),CxHomeWork=function(){function t(){}return t.prototype.Start=function(){window.onload=function(){var t=document.querySelector("#workLibraryId"),e="";t&&(e=t.value);var n=_App_mooc_chaoxing_factory__WEBPACK_IMPORTED_MODULE_2__.a.CreateHomeworkTopicTask(window,{refer:document.URL,id:Object(_App_internal_utils_utils__WEBPACK_IMPORTED_MODULE_1__.o)(document.URL,"&workId=","&"),info:e});n.Init(),_App_internal_application__WEBPACK_IMPORTED_MODULE_0__.a.App.config.auto&&document.querySelector("#workLibraryId")&&n.Start()}},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return d}));var o,r=n(12),i=n(3),c=n(4),a=n(1),u=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(){function t(){}return t.prototype.QueryQuestions=function(){var t=this,e=new Array;return document.querySelectorAll(".u-questionItem").forEach((function(n){e.push(t.createQuestion(n))})),e},t.prototype.createQuestion=function(t){return t.querySelector(".optionCnt span.u-icon-correct")?new f(t,3):null!=t.querySelector("input[type='radio']")?new l(t,1):null!=t.querySelector("input[type='checkbox']")?new l(t,2):null!=t.querySelector("textarea")?new p(t,4):new l(t,-1)},t}(),l=function(){function t(t,e){this.el=t,this.type=e,this.RemoveNotice()}return t.prototype.GetType=function(){return this.type},t.prototype.GetTopic=function(){return this.dealImgDomain(this.el.querySelector(".f-richEditorText.j-richTxt").innerHTML)},t.prototype.RemoveNotice=function(){this.el.querySelectorAll(".prompt-line-answer").forEach((function(t){t.remove()}))},t.prototype.AddNotice=function(t){Object(c.a)(t,"answer",this.el)},t.prototype.SetStatus=function(t){this.AddNotice(Object(i.f)(t))},t.prototype.getContent=function(t){return t.querySelector(".f-fl.optionCnt").innerHTML},t.prototype.getOption=function(t){return t.querySelector(".f-fl.optionPos").innerHTML.substring(0,1)},t.prototype.fill=function(t,e){t.parentElement.querySelector("input").checked||t.parentElement.querySelector("input").click(),e=(e=e.replace(/style=".*?"/,"")).replace(/(<p>|<\/p>)/,""),this.AddNotice(this.getOption(t)+":"+e)},t.prototype.Random=function(){var t=this.options(),e=Object(a.l)(0,t.length-1);return this.fill(t[e],this.getContent(t[e-1])),"random"},t.prototype.options=function(){return this.el.querySelectorAll(".u-tbl.f-pr.f-cb")},t.prototype.dealImgDomain=function(t){return t=(t=t.replace(/"http(s|):\/\/edu-image.nosdn.127.net\/(.*?)"/,'"http://nos.netease.com/edu-image/$2"')).replace(/"http(s|):\/\/(.*?)\//g,'"')},t.prototype.Fill=function(t){for(var e=this.options(),n=!1,o=0;o<t.correct.length;o++)for(var r=0;r<e.length;r++)t.Equal(this.dealImgDomain(this.getContent(e[r])),this.dealImgDomain(t.correct[o].content))&&(this.fill(e[r],t.correct[o].content),n=!0);return n?"ok":"no_match"},t.prototype.Correct=function(){return null},t}(),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.Random=function(){return"no_support_random"},e.prototype.Fill=function(t){var e,n=this.el.querySelector("textarea");return n.focus(),(e=t.correct[0].content.match(/^[\(\[]([\d\.]+),([\d\.]+)[\)\]]$/))?(n.value=((parseFloat(e[1])+parseFloat(e[2]))/2).toString(),this.AddNotice("填空 取值范围:"+t.correct[0].content)):(n.value=t.correct[0].content.split("##%_YZPRLFH_%##")[0],this.AddNotice("填空:"+t.correct[0].content.replace("##%_YZPRLFH_%##"," 或 "))),"ok"},e}(l),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.Fill=function(t){var e;return e=t.correct[0].content?this.el.querySelector(".u-tbl.f-pr.f-cb .u-icon-correct").parentElement.parentElement:this.el.querySelector(".u-tbl.f-pr.f-cb .u-icon-wrong").parentElement.parentElement,this.fill(e,this.getContent(e)),"ok"},e}(l),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.Init=function(){return null},e.prototype.Submit=function(){return null},e}(r.a)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return TaskFactory}));var _App_internal_app_task__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),_App_internal_application__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(0),_App_internal_utils_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),_App_mooc_course163_question__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(17),_App_internal_app_question__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3),__extends=(extendStatics=function(t,e){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),extendStatics,__awaiter=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},__generator=function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},TaskFactory=function(){function TaskFactory(){}return TaskFactory.CreateTask=function(t,e){return e.indexOf("paper:s")>0?(CourseTopicTask.collegeAnswer(this.getvalue(e,e.match(/,paper:(.*?),/)[1])),new CourseTopicTask):e.indexOf('tname:"')>0?(e.indexOf("answers:s")>0&&CourseTopicTask.collegeAnswer(this.getvalue(e,e.match(/,objectiveQList:(.*?),/)[1])),new CourseTopicTask(e)):e.indexOf("videoVo:s")>0?new VideoTask:e.indexOf("list:s")>0&&t.indexOf("PostBean.getPaginationReplys")>0?new DiscussTask(this.getvalue(e,e.match(/,list:(.*?),/)[1])):e.indexOf(",post:s")>0?null:new NoSupportTask},TaskFactory.getvalue=function(str,ret){try{ret=ret||"s0";var script=str.match(/^([\s\S]+?)dwr.engine._remoteHandleCallback/)[1];return script="function a(){"+script+";return "+ret+";}a();",eval(script)}catch(t){_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.log.Error("获取题目发生了一个错误",t)}return null},TaskFactory}(),NoSupportTask=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.Start=function(){var t=this;return new Promise((function(e){e(),_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.log.Info("暂不支持的类型,跳过"),t.callEvent("complete")}))},e}(_App_internal_app_task__WEBPACK_IMPORTED_MODULE_0__.a),VideoTask=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.Init=function(){var t=this;return new Promise((function(e){t.timer=setInterval((function(){var n=document.querySelector("video[id]");n&&(clearInterval(t.timer),t.video=n,t.video.addEventListener("loadstart",(function(){t.initVideo()})),t.video.addEventListener("ended",(function(){t.callEvent("complete")})),t.callEvent("load"),_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.log.Debug("视频加载完成"),e())}),500)}))},e.prototype.Stop=function(){var t=this;return new Promise((function(e){clearInterval(t.timer),t.callEvent("stop"),e()}))},e.prototype.initVideo=function(){this.video.muted=_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.config.video_mute,_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.config.video_multiple>1&&(this.video.playbackRate=_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.config.video_multiple)},e.prototype.Start=function(){var t=this;return new Promise((function(e){t.initVideo(),t.video.play(),t.timer=setInterval((function(){_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.config.auto&&t.video.paused&&t.video.play()}),5e3),e()}))},e}(_App_internal_app_task__WEBPACK_IMPORTED_MODULE_0__.a),CourseTopicTask=function(t){function e(n){var o=t.call(this)||this,r="";n&&(r=Object(_App_internal_utils_utils__WEBPACK_IMPORTED_MODULE_2__.o)(n,",{aid:",","));var i="";return document.URL.indexOf("cid")>0&&(i="c-"),o.bank=new _App_internal_app_question__WEBPACK_IMPORTED_MODULE_4__.e("mooc163",{refer:document.URL,id:i+e.getid(),info:r}),n&&o.bank.CheckCourse(),o}return __extends(e,t),e.getid=function(){var t=document.URL.match(/(\?id|cid)=(.*?)($|&)/);return t||(t=document.URL.match(/(&id)=(.*?)$/)),t?t[2]:""},e.collegeAnswer=function(t){var e=this.getid();if(""!=e){var n="";document.URL.indexOf("cid")>0&&(n="c-");var o,r=new _App_internal_app_question__WEBPACK_IMPORTED_MODULE_4__.d("mooc163",{refer:document.URL,id:n+e}),i=new Array;if(null==(o=t.objectiveQList)&&(o=t),null!=o){for(var c=0;c<o.length;c++){var a=o[c];if(1==a.type||2==a.type){if(a.optionDtos){var u=new Array,s=new Array,l=new _App_internal_app_question__WEBPACK_IMPORTED_MODULE_4__.a;l.topic=a.title,l.type=a.type;for(var p=0;p<a.optionDtos.length;p++){var f={content:a.optionDtos[p].content,option:String.fromCharCode(65+p)};a.optionDtos[p].answer&&s.push(f),u.push(f)}if(s.length<=0)return;l.correct=s,l.answers=u,i.push(l)}}else if(3==a.type){var d=new _App_internal_app_question__WEBPACK_IMPORTED_MODULE_4__.a;if(d.topic=a.title,d.type=4,d.correct=new Array,!a.stdAnswer)continue;d.correct.push({option:"一",content:a.stdAnswer}),i.push(d)}else if(4==a.type){var h=new _App_internal_app_question__WEBPACK_IMPORTED_MODULE_4__.a;if(h.topic=a.title,h.type=3,h.correct=new Array,!a.optionDtos)continue;for(var y=0;y<a.optionDtos.length;y++)if(a.optionDtos[y].answer){h.correct.push({option:"正确"==a.optionDtos[y].content,content:"正确"==a.optionDtos[y].content});break}i.push(h)}}r.Push(i)}}},e.prototype.Init=function(){var t=this;return new Promise((function(e){setTimeout((function(){document.querySelector("#tools-search")&&document.querySelector("#tools-search").remove();var n=Object(_App_internal_utils_utils__WEBPACK_IMPORTED_MODULE_2__.e)("搜索答案","点击搜索答案","cx-btn mooc163-search","tools-search"),o=document.querySelector(".j-unitct .m-learnunitUI");o||(o=document.querySelector(".u-learn-moduletitle")),t.topic=new _App_mooc_course163_question__WEBPACK_IMPORTED_MODULE_3__.b(document,t.bank),t.topic.SetQueryQuestions(new _App_mooc_course163_question__WEBPACK_IMPORTED_MODULE_3__.a),n.onclick=function(){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(e){switch(e.label){case 0:return n.innerText="搜索中...",[4,this.Start()];case 1:return t=e.sent(),n.innerText=Object(_App_internal_app_question__WEBPACK_IMPORTED_MODULE_4__.b)(t),[2]}}))}))},o.insertBefore(n,o.firstChild),e()}),1e3)}))},e.prototype.Start=function(){var t=this;return new Promise((function(e){return __awaiter(t,void 0,void 0,(function(){var t;return __generator(this,(function(n){switch(n.label){case 0:return Object(_App_internal_utils_utils__WEBPACK_IMPORTED_MODULE_2__.k)("你正准备使用中国慕课的答题功能,相应的我们需要你的正确答案,同意之后插件将自动检索你的所有答案\n* 本项选择不会影响你的正常使用(协议当前版本有效)\n* 手动点击答题结果页面自动采集页面答案\n","course_answer_collect_v2","我同意"),[4,this.topic.QueryAnswer()];case 1:return t=n.sent(),this.callEvent("complete"),e(t),[2]}}))}))}))},e.prototype.Submit=function(){return new Promise((function(t){var e=document.querySelector(".submit.j-submit");"none"==e.style.display&&t(),e.click();var n=setInterval((function(){var e=document.querySelector(".submit.j-replay");e&&"none"!=e.style.display&&(clearInterval(n),t())}),1e3)}))},e}(_App_internal_app_task__WEBPACK_IMPORTED_MODULE_0__.a),DiscussTask=function(t){function e(e){var n=t.call(this)||this;return n.list=e,n}return __extends(e,t),e.prototype.isRepeat=function(){return null==document.querySelector("a.unfollowed")},e.prototype.Start=function(){var t=this;return!this.list&&this.list.lenght<=0?(_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.log.Info("没有查询到记录,跳过"),void this.callEvent("complete")):this.isRepeat()?(_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.log.Info("已经关注,跳过"),void this.callEvent("complete")):(_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.log.Info("复读机开启,准备复读(回复当前本讨论)"),new Promise((function(e){var n=setInterval((function(){try{var o=t.list[Object(_App_internal_utils_utils__WEBPACK_IMPORTED_MODULE_2__.l)(0,t.list.length-1)],r=document.querySelector("iframe[id*=ueditor_]");_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.GlobalContext.UE.instants["ueditorInstant"+r.id.substr(r.id.indexOf("_")+1)].setContent(o.content)}catch(t){return void 0}clearInterval(n),t.callEvent("complete"),e()}),1e3)})))},e.prototype.Submit=function(){if(!this.isRepeat())return new Promise((function(t){_App_internal_application__WEBPACK_IMPORTED_MODULE_1__.a.App.log.Info("准备提交");var e=document.querySelector(".u-btn-sm.u-btn-primary");if(!e)return t();e.click(),setTimeout((function(){t()}),2e3)}))},e}(_App_internal_app_task__WEBPACK_IMPORTED_MODULE_0__.a)},,,,function(t,e,n){"use strict";n.r(e);var o,r,i=n(1),c=n(0),a=n(6),u=n(2),s=function(){function t(t,e){this.mooc=t,this.listen=e}return t.prototype.Start=function(){var t=this;this.mooc&&this.mooc.Start(),this.listen.Listen((function(e){c.a.App.log.Info("准备进行打码"),t.getVcode(e)}))},t.prototype.getVcode=function(t){var e=t.GetImage(),n="";n="string"==typeof e?e:Object(i.h)(e,"jpeg"),i.a.HttpPost(u.a.url+"vcode","img="+encodeURIComponent(n.substr("data:image/jpeg;base64,".length)),{json:!1,success:function(e){var n=JSON.parse(e);c.a.App.log.Debug(n),-2==n.code?t.Fill("error",n.msg,""):-1==n.code?t.Fill("error","打码服务器发生错误",""):n.msg?t.Fill("ok","打码成功",n.msg):t.Fill("error","未知错误","")},error:function(){t.Fill("network","网络请求失败","")}})},t}(),l=n(16),p=n(4),f=function(){function t(){}return t.prototype.Listen=function(t){var e;window.addEventListener("load",(function(){(e=document.getElementById("imgVerCode"))&&e.addEventListener("load",(function(){if(!(e.getAttribute("src").indexOf("?")<0)){var n=document.querySelector("#sub").parentElement.parentElement,o=n.querySelector(".prompt-line-dama");o&&o.remove();var r=Object(p.a)("cxmooc自动打码中...","dama",n);t(new d(e,r))}}))}))},t}(),d=function(){function t(t,e){this.img=t,this.notice=e}return t.prototype.GetImage=function(){return this.img},t.prototype.Fill=function(t,e,n){switch(t){case"ok":this.notice.innerText="cxmooc打码成功,准备提交",document.querySelector("input#code").value=n,setTimeout((function(){document.querySelector("a#sub").click()}),3e3);break;default:alert(e),this.notice.innerText=e}},t}(),h=n(11),y=n(3),_=function(){function t(){}return t.prototype.Start=function(){var t,e=function(){if(window.getScrollHeight()-window.getHeight()<=window.getScrollTop()+40){for(var n=document.querySelectorAll(".mb15.course_section > a.wh.wh"),o=!1,r=0;r<n.length;r++){if(o)return void n[r].click();document.URL==n[r].href&&(o=!0)}return c.a.App.log.Warn("阅读完成啦~"),void clearTimeout(t)}window.scrollTo(0,window.getScrollTop()+Object(i.l)(60,80)),t=setTimeout(e,500*Object(i.l)(10,20))};window.addEventListener("load",(function(){e()}))},t}(),m=function(){function t(){}return t.prototype.Start=function(){window.addEventListener("load",(function(){if(!c.a.App.config.auto)return c.a.App.log.Info("开启自动挂机能够自动阅读文章哦");c.a.App.log.Info("请在10秒内选择章节,否则插件将从第一章自动开始"),setTimeout((function(){document.querySelector(".mb15.course_section.fix").querySelector("a").click()}),1e4)}))},t}(),v=function(){function t(){}return t.prototype.Start=function(){var t=new y.d("cx");window.addEventListener("load",(function(){for(var e,n=c.a.GlobalContext.document.documentElement.innerHTML,o=new RegExp(/goTest\(.*?,(\d+),\d+,.*?,(\d+),false,/g),r=new Array;null!==(e=o.exec(n));){var i={refer:document.URL,id:"exam-"+e[2],info:e[2]};r.push(i)}for(o=new RegExp(/lookUpPaper\('(\d+)','\d+','(\d+)'/g);null!==(e=o.exec(n));){i={refer:document.URL,id:"exam-"+e[2],info:e[2]};r.push(i)}t.CheckCourse(r)}))},t}(),g=n(13),b=function(){function t(){}return t.prototype.CreateMooc=function(){var t=document.URL,e=null;return t.indexOf("mycourse/studentstudy?")>0?e=new s(new l.a,new f):t.indexOf("ananas/modules/video/index.html")>0?e=new h.b:t.indexOf("ananas/modules/audio/index.html")>0?e=new g.b:(t.indexOf("work/doHomeWorkNew")>0||t.indexOf("work/selectWorkQuestionYiPiYue")>0)&&self==top?e=new l.c:t.indexOf("exam/test/reVersionTestStartNew")>0||t.indexOf("exam/test/reVersionPaperMarkContentNew")>0?e=new l.b:t.indexOf("/course/")>0?e=new m:t.indexOf("ztnodedetailcontroller/visitnodedetail")>0?e=new _:t.indexOf("exam/test?")>0&&(e=new v),e},t}(),w=n(7),x=(n(10),function(){function t(){}return t.prototype.Start=function(){var t=this;this.hookAjax(),this.hook(),document.addEventListener("readystatechange",(function(){t.hook()}));var e=setInterval((function(){try{t.start(),clearInterval(e)}catch(t){}}),500)},t.prototype.createToolsBar=function(){var t=this,e=document.createElement("div");e.className="entrance_div",e.id="cxtools";var n=document.createElement("a");n.href="#",n.className="zhs-tools-btn",n.innerText="秒过视频",n.onclick=function(){c.a.GlobalContext.videoBoom((function(){}))};document.createElement("li");var o=document.createElement("a");o.href="#",o.className="zhs-tools-btn zhs-start-btn",o.innerText=c.a.App.config.auto?"暂停挂机":"开始挂机",o.onclick=function(){"暂停挂机"==o.innerText?(o.innerText="开始挂机",localStorage.auto=!1):(o.innerText="暂停挂机",localStorage.auto=!0,t.play())},e.appendChild(o),e.appendChild(n),console.log(document.querySelector(".videotop_box.fl").append(e))},t.prototype.compile=function(){var t=c.a.App.config.interval;c.a.App.log.Info(t+"分钟后自动切换下一节"),clearTimeout(this.lastTimer),this.lastTimer=setTimeout((function(){var t=c.a.GlobalContext.$,e=t(".clearfix.video.current_play").next();0==e.length&&(e=t(".clearfix.video.current_play").parents("ul.list,div").next("div,ul.list").find("li.video")),0!=e.length?c.a.App.config.auto&&t(e[0]).click():alert("刷课完成")}),6e4*t)},t.prototype.play=function(){this.video&&(this.video.muted=c.a.App.config.video_mute,this.video.playbackRate=c.a.App.config.video_multiple,c.a.App.config.auto&&this.video.play())},t.prototype.start=function(){var t=new w.a("createPlayer",c.a.GlobalContext.PlayerStarter),e=this;t.Middleware((function(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];e.createToolsBar(),c.a.App.log.Info("视频开始加载");var r=n[2].onPause,i=n[2].onReady;n[2].onReady=function(){i.apply(this),e.video=document.querySelector("#vjs_container_html5_api"),c.a.App.config.auto&&e.play()},n[2].hookPause=function(){r.apply(this),c.a.App.config.auto&&e.video.play()};var a=setInterval((function(){document.querySelectorAll(".current_play .time_icofinish").length>0&&(clearInterval(a),e.compile())}),2e3);return t.apply(this,n)})),new w.a("setInterval",c.a.GlobalContext).Middleware((function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return c.a.App.log.Debug("加速器启动"),c.a.App.config.super_mode&&(e[1]=e[1]/c.a.App.config.video_multiple),t.apply(this,e)}))},t.prototype.hookAjax=function(){new w.a("open",c.a.GlobalContext.XMLHttpRequest.prototype).Middleware((function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e[1].indexOf("popupAnswer/loadVideoPointerInfo")>=0&&Object.defineProperty(this,"responseText",{get:function(){return this.response.replace(/"questionPoint":\[.*?\],"knowledgeCardDtos"/gm,'"questionPoint":[],"knowledgeCardDtos"')}});var o=t.apply(this,e);return o}))},t.prototype.hook=function(){"interactive"==document.readyState&&new w.a("webpackJsonp",c.a.GlobalContext).Middleware((function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];try{if(e[1][702]){c.a.App.log.Debug("video hook ok",document.readyState);var o=e[1][702];e[1][702]=function(){var t=o.apply(this,arguments),e=new w.a("initVideo",arguments[1].default.methods);return e.Middleware((function(t){for(var e=this,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return c.a.App.log.Debug("initVideo"),c.a.GlobalContext.videoBoom=function(t){for(var n=document.querySelector(".nPlayTime .duration").innerText,o=0,r=n.match(/[\d]+/gi),c=0;c<3;c++)o+=parseInt(r[c])*Math.pow(60,2-c);var a=o+=Object(i.l)(20,200),u=e.lessonId,s=e.smallLessonId,l=[e.recruitId,u,s,e.lastViewVideoId,1,e.data.studyStatus,a,o,n],p="ev="+e.D26666.Z(l)+"&learningTokenId="+Base64.encode(e.preVideoInfo.studiedLessonDto.id)+"&uuid="+Object(i.o)(document.cookie,"uuid%22%3A%22","%22")+"&dateFormate="+Date.parse(new Date);Object(i.j)("https://studyservice.zhihuishu.com/learning/saveDatabaseIntervalTime",p,!1,(function(t){var e=JSON.parse(t);try{1==e.data.submitSuccess?alert("秒过成功,刷新后查看效果"):alert("秒过失败")}catch(t){alert("秒过失败")}}))},t.apply(this,n)})),t}}}catch(t){}return t.apply(this,e)}))},t}()),k=n(12),A=(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),O=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},C=function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},E=function(){function t(){}return t.prototype.Start=function(){var t=this;this.topic=new j(document,new y.e("zhs",{refer:document.URL,id:document.URL.match(/(checkHomework|dohomework)\/(.*?)\/(.*?)\/(.*?)\/(.*?)\/(.*?)$/)[4]})),this.topic.SetQueryQuestions(new S),window.addEventListener("load",(function(){setTimeout((function(){document.oncontextmenu=function(){},document.oncopy=function(){},document.onpaste=function(){},document.onselectstart=function(){},document.querySelectorAll(".examInfo.infoList.clearfix").length<=0?t.createBtn():t.topic.CollectAnswer()}),1e3)}))},t.prototype.createBtn=function(){var t=document.querySelector(".examPaper_partTit.mt20 ul"),e=Object(i.e)("搜索答案","点击搜索答案","zhs-search-answer green");t.append(e);var n=this;e.onclick=function(){return O(this,void 0,void 0,(function(){var t;return C(this,(function(o){switch(o.label){case 0:return Object(i.k)("你正准备使用智慧树答题功能,相应的我们需要你的正确答案,因为智慧树的机制问题,采集答案会导致无法重新作答,你是否愿意贡献你的答案?\n* 本项选择不会影响你的正常使用(协议当前版本有效)\n* 手动点击答题结果页面自动采集页面答案\n* (功能其实还没完成,后续更新)","zhs_answer_collect","我同意"),e.innerText="搜索中...",[4,n.topic.QueryAnswer()];case 1:return t=o.sent(),e.innerText=Object(y.b)(t),[2,!1]}}))}))}},t}(),S=function(){function t(){}return t.prototype.QueryQuestions=function(){var t=this,e=document.querySelectorAll(".examPaper_subject.mt20,.questionType"),n=new Array;return e.forEach((function(e){var o=e.querySelector(".subject_type_annex .subject_type"),r=Object(y.c)(Object(i.o)(o.innerHTML,"【","】")),c=t.createQuestion(r,e);n.push(c)})),n},t.prototype.createQuestion=function(t,e){switch(t){case 1:case 2:return new P(e,t);case 3:return new q(e,t);default:return new P(e,-1)}},t}(),T=function(){function t(t,e){this.el=t,this.type=e}return t.prototype.GetType=function(){return this.type},t.prototype.GetTopic=function(){return this.el.querySelector(".subject_type_describe.fl .subject_describe").innerHTML},t.prototype.removeNotice=function(){this.el.querySelectorAll(".prompt-line-answer").forEach((function(t){t.remove()}))},t.prototype.addNotice=function(t){var e=this.el.querySelector(".subject_node.mt10,.subject_node");Object(p.a)(t,"answer",e)},t.prototype.SetStatus=function(t){this.addNotice(Object(y.f)(t))},t.prototype.options=function(){return this.el.querySelectorAll(".subject_node .nodeLab")},t.prototype.getOption=function(t){return t.querySelector(".mr10,span.mr5").innerText.substring(0,1)},t.prototype.click=function(t,e){t.querySelector("input").parentElement.click(),this.addNotice(this.getOption(t)+":"+e)},t.prototype.getContent=function(t){return t.querySelector(".node_detail.examquestions-answer.fl").innerHTML},t.prototype.defaultAnswer=function(){var t=new y.a;return t.topic=this.GetTopic(),t.type=this.GetType(),t.correct=new Array,t.answers=new Array,t},t.prototype.isCorrect=function(){return null!=this.el.querySelector(".key_yes")},t}(),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return A(e,t),e.prototype.Random=function(){var t=this.options(),e=Object(i.l)(0,t.length-1);return this.click(t[e],this.getContent(t[e])),"random"},e.prototype.Fill=function(t){for(var e=this.options(),n=0;n<e.length;n++)e[n].querySelector("input").checked&&e[n].querySelector("input").parentElement.click();var o=!1;for(n=0;n<t.correct.length;n++)for(var r=0;r<e.length;r++)t.Equal(this.getContent(e[r]),t.correct[n].content)&&(this.click(e[r],t.correct[n].content),o=!0);return o?"ok":"no_match"},e.prototype.Correct=function(){if(!this.isCorrect())return null;for(var t=this.defaultAnswer(),e=this.options(),n=0;n<e.length;n++){var o={option:this.getOption(e[n]),content:this.getContent(e[n])};t.answers.push(o),e[n].querySelector("input").checked&&t.correct.push(o)}return t},e}(T),q=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return A(e,t),e.prototype.Random=function(){var t=this.options();return this.click(t[Object(i.l)(0,1)]),"random"},e.prototype.click=function(t){t.querySelector("label > input,input").click(),this.addNotice(this.getContent(t))},e.prototype.Fill=function(t){for(var e=this.options(),n=0;n<e.length;n++)if(this.getContent(e[n])==(t.correct[0].content?"对":"错")){this.click(e[n]);break}return"ok"},e.prototype.Correct=function(){if(!this.isCorrect())return null;var t=this.defaultAnswer(),e="对"==this.getContent(this.el.querySelector("input:checked").parentElement.parentElement);return t.correct.push({option:e,content:e}),t},e}(T),j=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return A(e,t),e.prototype.Init=function(){return null},e.prototype.Submit=function(){return null},e}(k.a),M=function(){function t(){}return t.prototype.CreateMooc=function(){var t=null;return document.URL.indexOf("studyh5.zhihuishu.com/videoStudy.html")>0?t=new x:document.URL.indexOf("zhihuishu.com/stuExamWeb.html")>0&&(t=new E),t},t}(),I=n(18),L=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{u(o.next(t))}catch(t){i(t)}}function a(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}u((o=o.apply(t,e||[])).next())}))},D=function(t,e){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},R=function(){function t(){}return t.prototype.Start=function(){this.hookAjax()},t.prototype.hookAjax=function(){var t=this;w.a.HookAjaxRespond(["CourseBean.getLessonUnitLearnVo.dwr","MocQuizBean.getQuizPaperDto.dwr","PostBean.getPaginationReplys.dwr"],(function(e,n){var o=I.a.CreateTask(e,n);return o&&setTimeout((function(){return L(t,void 0,void 0,(function(){var t,e=this;return D(this,(function(n){switch(n.label){case 0:return clearInterval(this.delayTimer),this.lastTask?[4,this.lastTask.Stop()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.lastTask=o,this.lastTask.addEventListener("complete",(function(){e.delay((function(){return L(e,void 0,void 0,(function(){return D(this,(function(t){switch(t.label){case 0:return[4,this.lastTask.Submit()];case 1:return t.sent(),this.nextTask(),[2]}}))}))}))})),[4,this.lastTask.Init()];case 3:return n.sent(),c.a.App.config.auto?((t=document.querySelector(".j-autoNext"))&&t.checked&&t.click(),[4,this.lastTask.Start()]):[3,5];case 4:n.sent(),n.label=5;case 5:return[2]}}))}))}),0),n})),w.a.HookAjaxRespond("MocQuizBean.fetchQuestions",(function(t,e){return e.indexOf("{questions:s0}")>0&&(e=e.replace("{questions:s0}","{questions:{}}")),e}))},t.prototype.nextTask=function(){var t=this,e=document.querySelectorAll(".j-unitslist.unitslist.f-cb > .f-fl"),n=this.next(e,(function(t){return t.className.indexOf("current")>0}));if(n)return n.click();var o=function(e){var n=document.querySelector(".f-fl.j-"+e+" .up.j-up.f-thide"),o=document.querySelectorAll(".f-fl.j-"+e+" .f-bg.j-list > .f-thide");return t.next(o,(function(t){return t.innerText.replace(/\s/g,"")==n.innerText.replace(/\s/g,"")}))};return(n=o("lesson"))?n.click():(n=o("chapter"))?(n.click(),document.querySelectorAll(".f-fl.j-lesson .f-bg.j-list > .f-thide")[0].click()):(c.a.App.log.Warn("任务结束了"),alert("任务结束了"))},t.prototype.next=function(t,e){for(var n=!1,o=0;o<t.length;o++)if(e(t[o]))n=!0;else if(n)return t[o];return null},t.prototype.delay=function(t){var e=c.a.App.config.interval;c.a.App.log.Info(e+"分钟后自动切换下一个任务点"),this.delayTimer=setTimeout((function(){c.a.App.config.auto&&t()}),6e4*e)},t}(),B=function(){function t(){}return t.prototype.CreateMooc=function(){return new R},t}(),W=function(){function t(){}return t.prototype.CreateMooc=function(){var t=(new b).CreateMooc();return null==t&&(t=(new M).CreateMooc()),null==t&&(t=(new B).CreateMooc()),t},t}(),U=n(9),N=function(){function t(t){this.moocFactory=t}return t.prototype.start=function(){try{var t=document.readyState;c.a.App.log.Debug("Start document state:",t);var e=this.moocFactory.CreateMooc();null!=e&&e.Start()}catch(t){c.a.App.log.Fatal("插件发生了一个致命错误:",t)}if(top==self){var n=!1;document.addEventListener("visibilitychange",(function(){if(document.hidden){if(n)return;c.a.App.log.Warn("请注意!最小化可能导致视频无法正常播放!允许切换窗口."),n=!0}}))}},t}();r=top==self?new U.b:new U.a;var G=(new Map).set("config",new a.a(Object(a.c)())).set("logger",r);c.a.GlobalContext=window,new c.a(c.d,new N(new W),G).run(),Object(i.d)(document)}]);