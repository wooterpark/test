!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}({0:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return l}));var r=n(5),o=n(1),i=n(2),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function c(e){try{a(r.next(e))}catch(e){i(e)}}function u(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}a((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a="backend",s="frontend",f="content",l=function(){function e(t,n,r){e.app=this,e.runEnv=t,this.runEnvSwitch(t),this.launcher=n,this.component=r}return Object.defineProperty(e,"App",{get:function(){return e.app},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"debug",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prod",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.component.get("config")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"log",{get:function(){return this.component.get("logger")},enumerable:!0,configurable:!0}),e.prototype.run=function(){this.launcher.start()},Object.defineProperty(e.prototype,"IsFrontend",{get:function(){return e.IsFrontend},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsBackend",{get:function(){return e.IsBackend},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"IsContent",{get:function(){return e.IsContent},enumerable:!0,configurable:!0}),e.prototype.runEnvSwitch=function(t){switch(t){case s:e.IsFrontend=!0;break;case a:e.IsBackend=!0;break;case f:e.IsContent=!0}},Object.defineProperty(e.prototype,"Client",{get:function(){return e.IsFrontend?Object(r.a)("cxmooc-tools"):Object(r.c)("cxmooc-tools")},enumerable:!0,configurable:!0}),e.CheckUpdate=function(t){e.IsContent?chrome.storage.local.get(["version","enforce","hotversion","url"],(function(e){return c(this,void 0,void 0,(function(){return u(this,(function(n){switch(n.label){case 0:return[4,t(i.a.version<e.version,e)];case 1:return n.sent(),[2]}}))}))})):o.a.HttpGet(i.a.url+"update?ver="+i.a.version,{json:!0,success:function(e){return c(this,void 0,void 0,(function(){var n;return u(this,(function(r){switch(r.label){case 0:return n={version:e.version,url:e.url,enforce:e.enforce,hotversion:e.hotversion,injection:e.injection},chrome.storage.local.set(n),[4,t(i.a.version<n.version,n)];case 1:return r.sent(),[2]}}))}))},error:function(){return c(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,t(!1,void 0)];case 1:return e.sent(),[2]}}))}))}})},e}()},1:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"l",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return f})),n.d(t,"j",(function(){return l})),n.d(t,"n",(function(){return d})),n.d(t,"m",(function(){return h})),n.d(t,"o",(function(){return g})),n.d(t,"f",(function(){return b})),n.d(t,"k",(function(){return v})),n.d(t,"h",(function(){return y})),n.d(t,"i",(function(){return m})),n.d(t,"c",(function(){return w}));var r=n(0),o=n(2),i=function(){function e(){}return e.Request=function(t){r.a.App.IsBackend?fetch(t.url,t).then((function(e){return t.json?e.json():e.text()})).then((function(e){t.success&&t.success(e)})).catch((function(){t.error&&t.error()})):e.crossDomainRequest(t)},e.errorCode=function(e){if(!e.code)return!1;switch(e.code){case-1:r.a.App.log.Info(e.msg);break;case-2:r.a.App.log.Warn(e.msg);break;default:return!1}return!0},e.crossDomainRequest=function(t){if(window.hasOwnProperty("GM_xmlhttpRequest"))t.data=t.body,t.onreadystatechange=function(n){if(4==n.readyState)if(200==n.status)if(t.json){var r=JSON.parse(n.responseText);if(e.errorCode(r))return void(t.error&&t.error());t.success&&t.success(r)}else t.success&&t.success(n.responseText);else t.error&&t.error()},window.GM_xmlhttpRequest(t);else{var n=r.a.App.Client;n.Recv((function(n){if(0==n.code){if(t.json&&e.errorCode(n.body))return void(t.error&&t.error());t.success&&t.success(n.body)}else t.error&&t.error()})),n.Send({type:"GM_xmlhttpRequest",info:{url:t.url,method:t.method,json:t.json,body:t.body,headers:t.headers}})}},e.HttpGet=function(e,t){t.url=e,this.Request(t)},e.HttpPost=function(e,t,n){n.url=e,n.body=t,n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded",n.headers.Authorization=r.a.App.config.vtoken,n.headers["X-Version"]=o.a.version+"",n.method="POST",this.Request(n)},e.SendRequest=function(t,n){if(n.info){var o=n.info;if(r.a.App.IsBackend)o.success=function(e){t.Send({body:e,code:0})},o.error=function(){t.Send({code:-1})},e.Request(o);else{var i=r.a.App.Client;i.Send({type:"GM_xmlhttpRequest",info:o}),i.Recv((function(e){t.Send(e)}))}}},e}();function c(e,t){var n=e.createElement("script");return n.setAttribute("type","text/javascript"),n.src=t,n.className="injected-js",e.documentElement.appendChild(n),n}function u(e){for(var t=e.getElementsByClassName("injected-js"),n=0;n<t.length;n++)t[n].remove()}function a(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function s(e,t,n,r){void 0===t&&(t=""),void 0===n&&(n=""),void 0===r&&(r="");var o=document.createElement("button");return o.innerText=e,o.id=r,o.title=t,o.className=n,o}function f(e,t){var n=p();return n.open("GET",e,!0),n.onreadystatechange=function(){4==this.readyState&&(200==this.status?t&&t(this.responseText,this.resource):n.errorCallback&&n.errorCallback(this))},n.send(),n}function l(e,t,n,o){void 0===n&&(n=!0);var i=p();return i.open("POST",e,!0),i.setRequestHeader("Authorization",r.a.App.config.vtoken||""),n?i.setRequestHeader("Content-Type","application/json"):i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onreadystatechange=function(){4==this.readyState&&(200==this.status?o&&o(this.responseText):i.errorCallback&&i.errorCallback(this))},i.send(t),i}function p(){var e;return(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).error=function(t){return e.errorCallback=t,e},e.withCredentials=!0,e}function d(e){return e=(e=e.replace(/<.*?>/g,"")).replace(/(^\s+)|(\s+$)/g,"")}function h(e){var t=/<img.*?src="(.*?)".*?>/g;e=e.replace(t,"$1"),t=/(<iframe.+?>)\s+?(<\/iframe>)/g,e=e.replace(t,"$1$2"),t=/<(iframe|a).*?(src|href)="(.*?)".*?>(.*?)<\/(iframe|a)>/g;return e=(e=(e=e.replace(t,"$3$4")).replace(/<.*?>/g,"")).replace(/(^\s+)|(\s+$)/g,""),(e=e.replace(/，/g,",").replace(/（/g,"(").replace(/）/g,")").replace(/？/g,"?").replace(/：/g,":").replace(/。/g,".").replace(/[“”]/g,'"')).replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&amp;/g,"&").trim()}function g(e,t,n){var r=e.indexOf(t)+t.length,o=e.indexOf(n,r);return e.substring(r,o)}function b(e){return e=e.substring(0,e.indexOf(".")+1)+e.substring(e.indexOf(".")+1).replace(".",""),Number(e)}function v(e,t,n){if(n=n||"yes",null==localStorage[t]||1!=localStorage[t]){var r=prompt(e+'\n如果以后不想再弹出本对话框并且同意请在下方填写"'+n+'"');if(null===r)return!1;if(n!=r)return!1;localStorage[t]=1}return!0}function y(e,t){var n=document.createElement("canvas");n.width=e.width,n.height=e.height,n.getContext("2d").drawImage(e,0,0,e.width,e.height);var r=n.toDataURL("image/"+t,.75);return n=null,r}function m(){return/Android|iPhone/i.test(navigator.userAgent)}function w(e){window.hasOwnProperty("GM_notification")?window.GM_notification(e):(r.a.App.Client.Send({type:"GM_notification",details:e}),r.a.App.Client.Send(e))}},2:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){}return e.version=2.4,e.url="https://cx.icodef.com/",e.hotVersion="2.4.0",e.match=["*://*/mycourse/studentstudy?*","*://*/work/doHomeWorkNew?*","*://*/work/selectWorkQuestionYiPiYue?*","*://*/exam/test/reVersionTestStartNew?*","*://*/ztnodedetailcontroller/visitnodedetail?*","*://*/antispiderShowVerify.ac*","*://*/html/processVerify.ac?*","*://*/exam/test/reVersionPaperMarkContentNew?*","*://*/ananas/modules/*/index.html?*","*://*/exam/test?*","*://*/course/*.html?*","*://examh5.zhihuishu.com/stuExamWeb.html*","*://onlineexamh5new.zhihuishu.com/stuExamWeb.html*","*://studyh5.zhihuishu.com/videoStudy.html*","*://www.icourse163.org/learn/*","*://www.icourse163.org/spoc/learn/*"],e}()},21:function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(0),i=n(2),c=n(1),u=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function c(e){try{a(r.next(e))}catch(e){i(e)}}function u(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}a((r=r.apply(e,t||[])).next())}))},a=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=(o=c.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},s=function(){function e(e){this.setConfig=e}return e.prototype.start=function(){return u(this,void 0,void 0,(function(){var e,t,n,r,s;return a(this,(function(f){for(e=this,t=document.getElementsByTagName("input"),n=function(n){var i=t.item(n),c=i.getAttribute("config-key");""!=c&&(i.onchange=function(){return u(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:return null===(t=this.getAttribute("prompt"))||localStorage[c+"_prompt"]?[3,3]:"yes"===prompt(t)?[3,2]:(n=this,[4,o.a.App.config.GetConfig(c)]);case 1:return n.value=r.sent()||1,[2];case 2:localStorage[c+"_prompt"]=!0,r.label=3;case 3:switch(this.type){case"checkbox":e.setConfig.SetConfig(c,this.checked);break;default:e.setConfig.SetConfig(c,this.value)}return[2]}}))}))},r.setVal(i,c))},r=this,s=0;s<t.length;s++)n(s);return o.a.CheckUpdate((function(e,t){var n;if(void 0===t)document.getElementById("tiku").src="./../img/error.svg",n=i.a.version+".0";else{if(e){var r=document.createElement("p");r.style.color="#ff0000",r.innerHTML='有新的版本更新:<a href="'+t.url+'" style="float:right;" target="_blank">点我去下载</a>  最新版本:v'+t.version,document.getElementsByTagName("body")[0].appendChild(r)}document.getElementById("injection").innerHTML=t.injection,n=i.a.version>=Object(c.f)(t.hotversion)?i.a.version+".0":t.hotversion}document.getElementById("version").innerHTML="v"+n+(o.a.App.debug?" debug":"")})),[2]}))}))},e.prototype.setVal=function(e,t){return u(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,o.a.App.config.GetConfig(t)];case 1:switch(n=r.sent(),e.type){case"checkbox":return e.checked=n,[2];default:return e.value=n,[2]}return[2]}}))}))},e}();window.onload=function(){var e=Object(r.b)(),t=(new Map).set("config",new r.a(e));new o.a(o.b,new s(e),t).run()}},5:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var r,o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function i(e){return new c(e)}var c=function(){function e(e){this.port=e,this.recv()}return e.prototype.recv=function(){var e=this;chrome.runtime.onConnect.addListener((function(t){t.name==e.port&&t.onMessage.addListener((function(n){e.acceptCallback(new s(t),n)}))}))},e.prototype.Accept=function(e){this.acceptCallback=e},e}(),u=function(){function e(e){this.tag=e}return e.prototype.Recv=function(e){this.recvCallback=e},e}();function a(e){return new s(e)}var s=function(e){function t(t){var n=this;return"string"==typeof t?(n=e.call(this,t)||this).connect():n.conn=t,n.recv(),n}return o(t,e),t.prototype.connect=function(){this.conn=chrome.runtime.connect({name:this.tag})},t.prototype.recv=function(){var e=this;this.conn.onMessage.addListener((function(t){e.recvCallback(t)}))},t.prototype.Send=function(e){this.conn.postMessage(e)},t}(u);function f(e){return new l(e)}var l=function(){function e(e){this.tag=e,this.recv()}return e.prototype.recv=function(){var e=this;window.addEventListener("message",(function(t){t.data.tag==e.tag&&t.data.conn_tag&&"client"==t.data.source&&e.acceptCallback(new d(e.tag,t.data.conn_tag),t.data.msg)}))},e.prototype.Accept=function(e){this.acceptCallback=e},e}();function p(e){return new d(e)}var d=function(e){function t(t,n){var r=this;return void 0!==n?((r=e.call(this,t)||this).connTag=n,r.source="server"):((r=e.call(this,t)||this).connect(),r.source="client"),r}return o(t,e),t.prototype.connect=function(){var e=this;this.connTag=Math.random(),window.addEventListener("message",(function(t){t.data.tag==e.tag&&t.data.conn_tag==e.connTag&&"server"==t.data.source&&e.recvCallback&&e.recvCallback(t.data.msg)}))},t.prototype.Send=function(e){window.postMessage({tag:this.tag,conn_tag:this.connTag,msg:e,source:this.source},"*")},t}(u)},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return a}));var r=n(1),o=n(0),i=function(){function e(e){this.getConfig=e}return e.prototype.GetConfig=function(e){return this.getConfig.GetConfig(e)},e.prototype.Watch=function(e,t){this.getConfig.Watch(e,t)},e.prototype.bool=function(e){return"boolean"==typeof e?e:"true"==e},Object.defineProperty(e.prototype,"super_mode",{get:function(){return this.bool(this.getConfig.GetConfig("super_mode"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vtoken",{get:function(){return this.getConfig.GetConfig("vtoken")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rand_answer",{get:function(){return this.bool(this.getConfig.GetConfig("rand_answer"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"auto",{get:function(){return this.bool(this.getConfig.GetConfig("auto"))},set:function(e){localStorage.auto=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"video_mute",{get:function(){return this.bool(this.getConfig.GetConfig("video_mute"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"answer_ignore",{get:function(){return this.bool(this.getConfig.GetConfig("answer_ignore"))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"video_cdn",{get:function(){return this.getConfig.GetConfig("video_cdn")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"video_multiple",{get:function(){return this.getConfig.GetConfig("video_multiple")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interval",{get:function(){var e=100*(this.getConfig.GetConfig("interval")||.1);return Math.floor(Object(r.l)(e-e/2,e+e/2))/100},enumerable:!0,configurable:!0}),e}();function c(){return new u}var u=function(){function e(){}return e.prototype.GetConfig=function(e){return new Promise((function(t){return chrome.storage.sync.get(e,(function(n){n.hasOwnProperty(e)?t(n[e]):t(void 0)}))}))},e.prototype.Watch=function(e,t){throw new Error("Method not implemented.")},e.prototype.SetConfig=function(e,t){return new Promise((function(n){var r={};r[e]=t,chrome.storage.sync.set(r,(function(){chrome.tabs.query({active:!0,currentWindow:!0},(function(n){chrome.tabs.sendMessage(n[0].id,{type:"cxconfig",key:e,value:t})})),n()}))}))},e}();function a(){return new s}var s=function(){function e(){window.addEventListener("message",(function(e){e.data.type&&"cxconfig"==e.data.type&&(o.a.App.log.Info("配置更新:"+e.data.key+"="+e.data.value),localStorage[e.data.key]=e.data.value)}))}return e.prototype.GetConfig=function(e){return localStorage[e]},e.prototype.Watch=function(e,t){var n=this;"string"!=typeof e?e.forEach((function(e,r){n.setWatchMap(e,t)})):this.setWatchMap(e,t)},e.prototype.setWatchMap=function(e,t){},e}()}});